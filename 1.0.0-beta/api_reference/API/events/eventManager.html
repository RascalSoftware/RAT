<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of eventManager</title>
  <meta name="keywords" content="eventManager">
  <meta name="description" content="">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2003-2019 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- ../menu.html API -->
<!-- menu.html events -->

<h1>eventManager
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong></strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>This is a script file. </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment"></pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="eventManager.html" class="code" title="">eventManager</a>	</li>
</ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="eventManager.html" class="code" title="">eventManager</a>	</li>
</ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="#_sub1" class="code">function value = getEvents()</a></li>
<li><a href="#_sub2" class="code">function setEvents(value)</a></li>
<li><a href="#_sub3" class="code">function value=events(op, newValue)</a></li>
<li><a href="#_sub4" class="code">function value = getHandlers()</a></li>
<li><a href="#_sub5" class="code">function setHandlers(value)</a></li>
<li><a href="#_sub6" class="code">function value=handlers(op, newValue)</a></li>
<li><a href="#_sub7" class="code">function register(eventType, functionName)</a></li>
<li><a href="#_sub8" class="code">function notify(eventType, data)</a></li>
<li><a href="#_sub9" class="code">function clear()</a></li>
</ul>


<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 classdef <a href="eventManager.html" class="code" title="">eventManager</a> &lt; handle
0002     <span class="comment">% A static event manager class that stores a list of event types and handler pairs</span>
0003     <span class="comment">% and notifies callback when triggered. Static properties are implemented using</span>
0004     <span class="comment">% persistent variables.</span>
0005 
0006     methods (Static)
0007         <a name="_sub0" href="#_subfunctions" class="code">function value = getEvents() </a>
0008             <span class="comment">% Gets the list of registered events</span>
0009             <span class="comment">%</span>
0010             <span class="comment">% eventType = eventManager.getEvents();</span>
0011             value = eventManager.events(<span class="string">'get'</span>);
0012         <span class="keyword">end</span>
0013         
0014         <a name="_sub1" href="#_subfunctions" class="code">function setEvents(value)</a>
0015             <span class="comment">% Sets the list of registered events</span>
0016             <span class="comment">%</span>
0017             <span class="comment">% eventManager.setEvents(eventList);</span>
0018             eventManager.events(<span class="string">'set'</span>, value);
0019         <span class="keyword">end</span>
0020 
0021         <a name="_sub2" href="#_subfunctions" class="code">function value=events(op, newValue)</a>
0022             <span class="comment">% Helper to store the list of registered events as static variable</span>
0023             <span class="comment">%</span>
0024             <span class="comment">% eventList = eventManager.events('get');</span>
0025             <span class="comment">% eventManager.events('set', eventList);</span>
0026             <span class="keyword">persistent</span> <a href="#_sub3" class="code" title="subfunction value=events(op, newValue)">events</a>
0027             
0028             <span class="keyword">if</span> isempty(<a href="#_sub3" class="code" title="subfunction value=events(op, newValue)">events</a>) 
0029                 <a href="#_sub3" class="code" title="subfunction value=events(op, newValue)">events</a> = {};
0030             <span class="keyword">end</span>
0031 
0032             <span class="keyword">switch</span> op
0033                <span class="keyword">case</span> <span class="string">'set'</span>    
0034                   <a href="#_sub3" class="code" title="subfunction value=events(op, newValue)">events</a> = newValue;
0035             <span class="keyword">end</span>
0036             value = <a href="#_sub3" class="code" title="subfunction value=events(op, newValue)">events</a>;
0037         <span class="keyword">end</span>
0038         
0039         <a name="_sub3" href="#_subfunctions" class="code">function value = getHandlers()</a>
0040             <span class="comment">% Gets the list of registered callbacks</span>
0041             <span class="comment">%</span>
0042             <span class="comment">% handlerList = eventManager.getHandlers();</span>
0043             value = eventManager.handlers(<span class="string">'get'</span>);
0044         <span class="keyword">end</span>
0045         
0046         <a name="_sub4" href="#_subfunctions" class="code">function setHandlers(value)</a>
0047             <span class="comment">% Sets the list of registered callbacks</span>
0048             <span class="comment">%</span>
0049             <span class="comment">% eventManager.setHandlers(handlerList);</span>
0050             eventManager.handlers(<span class="string">'set'</span>, value);
0051         <span class="keyword">end</span>
0052 
0053         <a name="_sub5" href="#_subfunctions" class="code">function value=handlers(op, newValue)            </a>
0054             <span class="comment">% Helper to store the list of registered callbacks as static variable</span>
0055             <span class="comment">%</span>
0056             <span class="comment">% handlerList = eventManager.handlers('get');</span>
0057             <span class="comment">% eventManager.handlers('set', handlerList);</span>
0058             <span class="keyword">persistent</span> <a href="#_sub6" class="code" title="subfunction value=handlers(op, newValue)">handlers</a>
0059             
0060             <span class="keyword">if</span> isempty(<a href="#_sub6" class="code" title="subfunction value=handlers(op, newValue)">handlers</a>) 
0061                 <a href="#_sub6" class="code" title="subfunction value=handlers(op, newValue)">handlers</a> = {};
0062             <span class="keyword">end</span>
0063 
0064             <span class="keyword">switch</span> op
0065                <span class="keyword">case</span> <span class="string">'set'</span>    
0066                   <a href="#_sub6" class="code" title="subfunction value=handlers(op, newValue)">handlers</a> = newValue;
0067             <span class="keyword">end</span>
0068             value = <a href="#_sub6" class="code" title="subfunction value=handlers(op, newValue)">handlers</a>;
0069         <span class="keyword">end</span>
0070 
0071         <a name="_sub6" href="#_subfunctions" class="code">function register(eventType, functionName)</a>
0072             <span class="comment">% Register a callback function for the given eventType. eventType</span>
0073             <span class="comment">% should be an eventTypes enum and functionName should be name of the</span>
0074             <span class="comment">% callback function.</span>
0075             <span class="comment">%</span>
0076             <span class="comment">% eventManager.register(eventTypes.Plot, 'plotRefSLDHelper');</span>
0077             eventType = validateOption(eventType, <span class="string">'eventTypes'</span>, <span class="string">'Event type must be an eventTypes enum'</span>).value;
0078 
0079             <span class="keyword">if</span> ~isText(functionName) || isempty(char(functionName))
0080                 throw(exceptions.invalidType(<span class="string">'Second value must be function name (text)'</span>));
0081             <span class="keyword">end</span>
0082 
0083             <a href="#_sub3" class="code" title="subfunction value=events(op, newValue)">events</a> = eventManager.getEvents();
0084             <a href="#_sub6" class="code" title="subfunction value=handlers(op, newValue)">handlers</a> = eventManager.getHandlers();
0085             
0086             <span class="keyword">if</span> isempty(<a href="#_sub3" class="code" title="subfunction value=events(op, newValue)">events</a>) || ~any([<a href="#_sub3" class="code" title="subfunction value=events(op, newValue)">events</a>{:}] == eventType)
0087                 eventManagerInterface(<span class="string">'register'</span>, eventType);
0088             <span class="keyword">end</span>
0089 
0090             <a href="#_sub3" class="code" title="subfunction value=events(op, newValue)">events</a>{end + 1} = eventType;
0091             <a href="#_sub6" class="code" title="subfunction value=handlers(op, newValue)">handlers</a>{end + 1} = functionName;
0092 
0093             eventManager.setEvents(<a href="#_sub3" class="code" title="subfunction value=events(op, newValue)">events</a>)
0094             eventManager.setHandlers(<a href="#_sub6" class="code" title="subfunction value=handlers(op, newValue)">handlers</a>)           
0095         <span class="keyword">end</span>
0096 
0097         <a name="_sub7" href="#_subfunctions" class="code">function notify(eventType, data)</a>
0098             <span class="comment">% Sends given data to the callbacks registered for the</span>
0099             <span class="comment">% eventType. eventType should be an eventTypes enum and</span>
0100             <span class="comment">% data should be the appropriate data for the event</span>
0101             <span class="comment">%</span>
0102             <span class="comment">% eventManager.notify(eventTypes.Message, 'wow');</span>
0103             <a href="#_sub3" class="code" title="subfunction value=events(op, newValue)">events</a> = eventManager.getEvents();
0104             <a href="#_sub6" class="code" title="subfunction value=handlers(op, newValue)">handlers</a> = eventManager.getHandlers();
0105 
0106             eventType = validateOption(eventType, <span class="string">'eventTypes'</span>, <span class="string">'Event type must be an eventTypes enum'</span>).value;
0107             <span class="keyword">for</span> i=1:length(<a href="#_sub3" class="code" title="subfunction value=events(op, newValue)">events</a>)
0108                 <span class="keyword">if</span> (eventType == <a href="#_sub3" class="code" title="subfunction value=events(op, newValue)">events</a>{i})
0109                     <span class="keyword">try</span>
0110                         funcHandle = str2func(<a href="#_sub6" class="code" title="subfunction value=handlers(op, newValue)">handlers</a>{i});
0111                         funcHandle(data);
0112                     <span class="keyword">catch</span> ME
0113                         fprintf(<span class="string">'EVENTMANAGER: calling %s function failed because: \n\n %s\n'</span>, <a href="#_sub6" class="code" title="subfunction value=handlers(op, newValue)">handlers</a>{i}, ME.message);
0114                     <span class="keyword">end</span>
0115                 <span class="keyword">end</span>
0116             <span class="keyword">end</span>
0117         <span class="keyword">end</span>
0118 
0119         <a name="_sub8" href="#_subfunctions" class="code">function clear()</a>
0120             <span class="comment">% Clear all register event callbacks</span>
0121             <span class="comment">%</span>
0122             <span class="comment">% eventManager.clear();</span>
0123             eventManager.setEvents({})
0124             eventManager.setHandlers({})
0125             eventManagerInterface(<span class="string">'clear'</span>);
0126         <span class="keyword">end</span>
0127 
0128     <span class="keyword">end</span>
0129 <span class="keyword">end</span>
</pre></div>

<hr><address>Generated on Fri 01-Dec-2023 17:59:39 by <strong><a href="https://github.com/gllmflndn/m2html">m2html</a></strong> &copy; 2003-2022</address>
</body>
</html>


<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Profile Resampling (‘microslicing’) &#8212; RAT 1.0.0-beta documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/design-tabs.js"></script>
    <link rel="icon" href="_static/logo.png"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Parallelising Calculations" href="parallelisation.html" />
    <link rel="prev" title="Advanced Topics" href="advanced.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="index.html">
    <img class="logo" src="_static/logo.png" alt="Logo" />
    
  </a>
</p>









<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="algorithms.html">Algorithms</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="advanced.html">Advanced Topics</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Profile Resampling (‘microslicing’)</a></li>
<li class="toctree-l2"><a class="reference internal" href="parallelisation.html">Parallelising Calculations</a></li>
<li class="toctree-l2"><a class="reference internal" href="customLanguages.html">Custom Models in Python or C++</a></li>
<li class="toctree-l2"><a class="reference internal" href="events.html">Handling Events During Calculations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="calcTypes.html">Different Calculation Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="utilities.html">Utility Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="support.html">Support</a></li>
</ul>


        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="profile-resampling-microslicing">
<span id="resampling"></span><h1>Profile Resampling (‘microslicing’)<a class="headerlink" href="#profile-resampling-microslicing" title="Permalink to this heading">¶</a></h1>
<p>The Nevot-Croce roughness approximation only strictly holds for cases where the interface roughness is much less than the layer thickness. Ths usual way
of handling cases where there are such layers, is to split the interfaces into a large number of layers of zero roughness, so that the roughness problem
is circumvented:</p>
<a class="reference internal image-reference" href="_images/resamplePic.png"><img alt="old resampling" src="_images/resamplePic.png" style="width: 700px;" /></a>
<p>However, this kind of ‘dumb microslicing’ causes the creation of a large number of layers, which may not all be necessary and will significantly slow down the calculation.</p>
<p>This problem of finding the lowest number of individual points that will completely describe a waveform is a common problem in signal processing. RAT uses a techique
borrowed from SP called Adaptive Resampling (AR).</p>
<p>AR is an interative process which aims to find the lowest number of points that will best describe a curve. It does this by adding points where the angle between neighbouring
points becomes greater than a threshold value. So, it adds more points where the signal is changing most strongly (in order to capture all details of the curvature). So, for a
cosine wave, the resampled points cluster at the regions of largest curvature:</p>
<a class="reference internal image-reference" href="_images/adaptiveSpPic.png"><img alt="adaotive cosine" src="_images/adaptiveSpPic.png" style="width: 700px;" /></a>
<p>So, for the continuous cosine curve show in blue, the AR algorithm has chosen the red points as being most representative. In other words, if the red points were
joined with straight lines, the resulting curve would be very similar to the original signal. The salient point is that more points are required where the gradient
of the signal is changing quickly, and those where the gradient is constant can be represented by fewer points.</p>
<p>RAT borrows the AR trick from the signal processors, and uses this method to resample the SLD profiles. The AR algorithm is used to find the best series of points
that will represent the profile most accurately, and then each of these points is taken as the centre of layer (of zero roughness). The thickness of each layer is half the
distance between neighbouring points. So, for an SLD profile of a floating bilayer (blue line), AR selects the red points:</p>
<a class="reference internal image-reference" href="_images/dotsSLD.png"><img alt="sld and dots..." src="_images/dotsSLD.png" style="width: 700px;" /></a>
<p>..which are then converted into a set of zero roughness layers:</p>
<a class="reference internal image-reference" href="_images/layersPic.png"><img alt="sld and dots..." src="_images/layersPic.png" style="width: 700px;" /></a>
<p><strong>Using Resampling in RAT</strong>
Using resampling on a contrast in RAT is very simple. For any contrast that you want to reample, then simply set the ‘resample’ flag for that contrast to ‘true’</p>
<div class="highlight-MATLAB notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="p">.</span><span class="n">setContrast</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s">&#39;resample&#39;</span><span class="p">,</span><span class="nb">true</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="_images/resampleContrast.png"><img alt="resample contrast" src="_images/resampleContrast.png" style="width: 400px;" /></a>
<p>The resampling itself is controlled by the ‘resamPars’ field in the controls block:</p>
<a class="reference internal image-reference" href="_images/controlsBlock.png"><img alt="resample contrast" src="_images/controlsBlock.png" style="width: 400px;" /></a>
<p>The resampPars field has two parameters in it, corresponding to the minimum angle and minimum points (resamPars = [minAngle minPoints]  ) which to use to resample the profiles.
These have the following effects:</p>
<ul class="simple">
<li><p><strong>minAngle</strong> - The algorithm refines near the  points which form, together with their left and right neighbours, a triangle with central angle smaller than the given value.  So, a larger value of minAngle results in a finer resampling. minAngle is defined as a multiple of pi (i.e. minAngle = 0.9 refines where the adjacent points form an angle greater than 0.9 * pi)</p></li>
<li><p><strong>nPoints</strong> - The initial number of domain points (layers). The algorithm will start from this number of layers, and refine until all the <em>minAngle</em> criteria are satisfied.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Generally, <em>minAngle</em> has a larger effect on the eventual resampling than <em>nPoints</em>.</p>
</div>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &#169;2022-2024, ISIS Neutron and Muon Source.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 6.2.1</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="_sources/resampling.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>
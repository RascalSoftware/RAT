<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of domainsClass</title>
  <meta name="keywords" content="domainsClass">
  <meta name="description" content="">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2003-2019 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- ../menu.html API -->
<!-- menu.html projectClass -->

<h1>domainsClass
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong></strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>This is a script file. </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment"></pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="contrastsClass.html" class="code" title="">contrastsClass</a>	</li>
<li><a href="domainContrastsClass.html" class="code" title="">domainContrastsClass</a>	</li>
<li><a href="domainsClass.html" class="code" title="">domainsClass</a>	</li>
<li><a href="mergeStructs.html" class="code" title="function outStruct = mergeStructs(varargin)">mergeStructs</a>	</li>
<li><a href="parametersClass.html" class="code" title="">parametersClass</a>	</li>
<li><a href="projectClass.html" class="code" title="">projectClass</a>	</li>
</ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="../../API/project.html" class="code" title="function obj = project(options)">project</a>	Creates a project object.</li>
<li><a href="domainsClass.html" class="code" title="">domainsClass</a>	</li>
</ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="#_sub1" class="code">function obj = domainsClass(experimentName, calculationType, geometry)</a></li>
<li><a href="#_sub2" class="code">function names = getAllAllowedNames(obj)</a></li>
<li><a href="#_sub3" class="code">function obj = addDomainRatio(obj, varargin)</a></li>
<li><a href="#_sub4" class="code">function obj = removeDomainRatio(obj, varargin)</a></li>
<li><a href="#_sub5" class="code">function obj = setDomainRatio(obj, varargin)</a></li>
<li><a href="#_sub6" class="code">function obj = addDomainContrast(obj, varargin)</a></li>
<li><a href="#_sub7" class="code">function obj = removeDomainContrast(obj, row)</a></li>
<li><a href="#_sub8" class="code">function obj = setDomainContrast(obj, row, varargin)</a></li>
<li><a href="#_sub9" class="code">function obj = setDomainContrastModel(obj, row, model)</a></li>
<li><a href="#_sub10" class="code">function outStruct = toStruct(obj)</a></li>
<li><a href="#_sub11" class="code">function displayScalarObject(obj)</a></li>
</ul>


<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 classdef <a href="domainsClass.html" class="code" title="">domainsClass</a> &lt; <a href="projectClass.html" class="code" title="">projectClass</a>
0002     
0003     <span class="comment">% Class definition for Standard Layers with no absorption.</span>
0004     <span class="comment">% Layers defined in terms of thickness, roughness, real SLD and</span>
0005     <span class="comment">% hydration.</span>
0006     <span class="comment">%</span>
0007     <span class="comment">% Sub objects used are:</span>
0008     <span class="comment">% parametersClass         - parameter definition with priors</span>
0009     <span class="comment">% domainContrastsClass    - additional contrasts object for domains</span>
0010     
0011     properties
0012         domainRatio          <span class="comment">% Class for specifying the ratio between domains</span>
0013         domainContrasts      <span class="comment">% Modified contrast class with no data for domains</span>
0014     <span class="keyword">end</span>
0015        
0016     methods
0017 
0018         <a name="_sub0" href="#_subfunctions" class="code">function obj = domainsClass(experimentName, calculationType, geometry)</a>
0019             <span class="comment">% Creates a Project object for a domains calculation.</span>
0020             <span class="comment">% The only argument is the experiment name which is a char</span>
0021             <span class="comment">% array, which is optional</span>
0022             <span class="comment">%</span>
0023             <span class="comment">% problem = domainsClass('New experiment');</span>
0024             arguments
0025                 experimentName {mustBeTextScalar} = <span class="string">''</span>
0026                 calculationType = calculationTypes.Domains
0027                 geometry = geometryOptions.AirSubstrate
0028             <span class="keyword">end</span>
0029             
0030             <span class="comment">% Call projectClass constructor</span>
0031             obj@<a href="projectClass.html" class="code" title="">projectClass</a>(experimentName, calculationType, geometry);
0032 
0033             <span class="comment">% Create a contrasts class for a domains calculation</span>
0034             obj.contrasts = <a href="contrastsClass.html" class="code" title="">contrastsClass</a>(true);
0035 
0036             <span class="comment">% For a domains calculation, initialise secondary contrasts</span>
0037             <span class="comment">% object and domain ratio parameter class</span>
0038             obj.domainContrasts = <a href="domainContrastsClass.html" class="code" title="">domainContrastsClass</a>();
0039             obj.domainRatio = <a href="parametersClass.html" class="code" title="">parametersClass</a>(<span class="string">'Domain Ratio 1'</span>,0.4,0.5,0.6,false,<span class="string">'uniform'</span>,0,Inf);
0040         <span class="keyword">end</span>
0041 
0042         <a name="_sub1" href="#_subfunctions" class="code">function names = getAllAllowedNames(obj)           </a>
0043             <span class="comment">% Returns a cell array of all currently</span>
0044             <span class="comment">% set parameter names for the project.</span>
0045             names = <a href="#_sub2" class="code" title="subfunction names = getAllAllowedNames(obj)">getAllAllowedNames</a>@<a href="projectClass.html" class="code" title="">projectClass</a>(obj);
0046             names.domainRatioNames = obj.domainRatio.getParamNames();
0047         <span class="keyword">end</span>
0048         
0049         <span class="comment">% -------------------------------------------------------------------</span>
0050         <span class="comment">% Editing of Domain Ratio block</span>
0051         
0052         <a name="_sub2" href="#_subfunctions" class="code">function obj = addDomainRatio(obj, varargin)</a>
0053             <span class="comment">% Adds a new domain ratio parameter. Expects the name</span>
0054             <span class="comment">% of domain ratio, min, value, max, and if fit is off or on</span>
0055             <span class="comment">%</span>
0056             <span class="comment">% problem.addDomainRatio('Domain Ratio 2', 0.4, 0.5, 0.6, true);</span>
0057             obj.domainRatio.addParam(varargin{:});
0058         <span class="keyword">end</span>
0059         
0060         <a name="_sub3" href="#_subfunctions" class="code">function obj = removeDomainRatio(obj, varargin)</a>
0061             <span class="comment">% Removes specified domain ratio parameter. Expects the</span>
0062             <span class="comment">% name/index of domain ratio to remove</span>
0063             <span class="comment">%</span>
0064             <span class="comment">% problem.removeDomainRatio(2);</span>
0065            obj.domainRatio.removeParam(varargin{:}); 
0066         <span class="keyword">end</span>
0067         
0068         <a name="_sub4" href="#_subfunctions" class="code">function obj = setDomainRatio(obj, varargin)</a>
0069             <span class="comment">% Edits an existing domain ratio parameter. Expects the</span>
0070             <span class="comment">% index of domain ratio to edit and key-value pairs</span>
0071             <span class="comment">%</span>
0072             <span class="comment">% problem.setDomainRatio(1, 'name','Domain Ratio 1', 'value', 0.55);</span>
0073             obj.domainRatio.setParameter(varargin{:});
0074         <span class="keyword">end</span>
0075     
0076         <span class="comment">% ----------------------------------------------------------------</span>
0077         <span class="comment">%</span>
0078         <span class="comment">%   Editing of Domains Contrasts Block</span>
0079         
0080         <a name="_sub5" href="#_subfunctions" class="code">function obj = addDomainContrast(obj, varargin)</a>
0081             <span class="comment">% Adds a new domainContrast parameter. Expects a parameter name,</span>
0082             <span class="comment">% and with key-value pairs with one or more of the following</span>
0083             <span class="comment">% &quot;bulk in&quot;, &quot;bulk out&quot;, &quot;model&quot;</span>
0084             <span class="comment">%</span>
0085             <span class="comment">% problem.addDomainContrast('domainContrast 1', 'nba', 'Silicon');</span>
0086             allowedNames = obj.getAllAllowedNames();
0087             obj.domainContrasts.addContrast(allowedNames, varargin{:});  
0088         <span class="keyword">end</span>
0089 
0090         <a name="_sub6" href="#_subfunctions" class="code">function obj = removeDomainContrast(obj, row)</a>
0091             <span class="comment">% Removes a specified domainContrast parameter. Expects</span>
0092             <span class="comment">% index or name of resolution to remove</span>
0093             <span class="comment">%</span>
0094             <span class="comment">% problem.removeDomainContrast(1);</span>
0095             obj.domainContrasts.removeContrast(row);
0096         <span class="keyword">end</span>
0097  
0098         <a name="_sub7" href="#_subfunctions" class="code">function obj = setDomainContrast(obj, row, varargin)   </a>
0099             <span class="comment">% Allow setting of all parameters in terms of name value pairs.</span>
0100             <span class="comment">% First input must be domainContrast number or name, subsequent</span>
0101             <span class="comment">% inputs are name / value pairs for the parts involved</span>
0102             <span class="comment">%</span>
0103             <span class="comment">% problem.setContrast(1, 'name', 'domainContrast')</span>
0104                         
0105             <span class="comment">% Get the list of allowed values depending on what is</span>
0106             <span class="comment">% set for the other contrasts.</span>
0107             allowedValues = obj.getAllAllowedNames;
0108             
0109             <span class="comment">% Call the setContrast method</span>
0110             obj.domainContrasts.setContrast(row, allowedValues, varargin{:});
0111         <span class="keyword">end</span>
0112         
0113         <a name="_sub8" href="#_subfunctions" class="code">function obj = setDomainContrastModel(obj, row, model)</a>
0114             <span class="comment">% Edits the model of an existing contrast parameter. Expects</span>
0115             <span class="comment">% the index of contrast parameter and cell array of layer names</span>
0116             <span class="comment">%</span>
0117             <span class="comment">% problem.setDomainContrastModel(1, {'layer 1'})</span>
0118                         
0119             <span class="comment">% Make a different allowed list depending on whether</span>
0120             <span class="comment">% it is custom or layers</span>
0121             <span class="keyword">if</span> strcmpi(obj.modelType, modelTypes.StandardLayers.value)
0122                 <span class="comment">% Standard Layers</span>
0123                 allowedValues = obj.layers.getLayersNames();
0124             <span class="keyword">else</span>
0125                 <span class="comment">% Custom models</span>
0126                 allowedValues = obj.customFile.getCustomNames();
0127             <span class="keyword">end</span>
0128             
0129             <span class="comment">% Call the setContrastModel method</span>
0130             obj.domainContrasts.setContrastModel(row, obj.modelType, allowedValues, model);
0131         <span class="keyword">end</span>
0132 
0133         <a name="_sub9" href="#_subfunctions" class="code">function outStruct = toStruct(obj)    </a>
0134             <span class="comment">% Converts the domains class parameters into a struct array</span>
0135             <span class="comment">% for input into the RAT toolbox</span>
0136 
0137             mainStruct = <a href="#_sub10" class="code" title="subfunction outStruct = toStruct(obj)">toStruct</a>@<a href="projectClass.html" class="code" title="">projectClass</a>(obj);
0138 
0139             domainContrastStruct = obj.domainContrasts.toStruct(obj.getAllAllowedNames, obj.modelType);
0140             domainContrastStruct = cell2struct(struct2cell(domainContrastStruct), <span class="keyword">...</span>
0141                                                 {<span class="string">'domainContrastNames'</span>, <span class="keyword">...</span>
0142                                                  <span class="string">'numberOfDomainContrasts'</span>, <span class="keyword">...</span>
0143                                                  <span class="string">'domainContrastNbas'</span>, <span class="keyword">...</span>
0144                                                  <span class="string">'domainContrastNbss'</span>, <span class="keyword">...</span>
0145                                                  <span class="string">'domainContrastLayers'</span>, <span class="keyword">...</span>
0146                                                  <span class="string">'domainContrastRepeatSLDs'</span>, <span class="keyword">...</span>
0147                                                  <span class="string">'domainContrastCustomFile'</span>});
0148 
0149             domainRatioStruct = obj.domainRatio.toStruct();
0150             domainRatioStruct = cell2struct(struct2cell(domainRatioStruct), <span class="keyword">...</span>
0151                                             {<span class="string">'domainRatioNames'</span>, <span class="keyword">...</span>
0152                                              <span class="string">'ndomainRatios'</span>, <span class="keyword">...</span>
0153                                              <span class="string">'domainRatioConstr'</span>, <span class="keyword">...</span>
0154                                              <span class="string">'domainRatios'</span>, <span class="keyword">...</span>
0155                                              <span class="string">'domainRatioFitYesNo'</span>, <span class="keyword">...</span>
0156                                              <span class="string">'domainRatioPriors'</span>});
0157 
0158             outStruct = <a href="mergeStructs.html" class="code" title="function outStruct = mergeStructs(varargin)">mergeStructs</a>(mainStruct, <span class="keyword">...</span>
0159                                      domainContrastStruct, <span class="keyword">...</span>
0160                                      domainRatioStruct);
0161 
0162         <span class="keyword">end</span>
0163 
0164     <span class="keyword">end</span>
0165     
0166     <span class="comment">% ------------------------------------------------------------------</span>
0167     
0168     methods (Access = protected)
0169         
0170         <a name="_sub10" href="#_subfunctions" class="code">function displayScalarObject(obj)</a>
0171             <span class="comment">% Display the whole class. Call the display methods for</span>
0172             <span class="comment">% the sub-classes where appropriate</span>
0173             
0174             <span class="comment">% Display initial properties from superclass</span>
0175             <a href="#_sub11" class="code" title="subfunction displayScalarObject(obj)">displayScalarObject</a>@<a href="projectClass.html" class="code" title="">projectClass</a>(obj);
0176 
0177             <span class="comment">% Display the domains ratio contrast</span>
0178             fprintf(<span class="string">'   Domain Ratios: ----------------------------------------------------------------------------------------------- \n\n'</span>);
0179             obj.domainRatio.displayParametersTable;
0180 
0181             <span class="comment">% Display the domainContrasts object</span>
0182             fprintf(<span class="string">'   Domains Contrasts: ----------------------------------------------------------------------------------------------- \n\n'</span>);
0183             obj.domainContrasts.displayContrastsObject; 
0184         <span class="keyword">end</span>
0185         
0186     <span class="keyword">end</span>
0187     
0188 <span class="keyword">end</span>
0189 
</pre></div>

<hr><address>Generated on Wed 10-May-2023 12:43:42 by <strong><a href="https://github.com/gllmflndn/m2html">m2html</a></strong> &copy; 2003-2022</address>
</body>
</html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of parametersClass</title>
  <meta name="keywords" content="parametersClass">
  <meta name="description" content="">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2003-2019 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- ../menu.html API -->
<!-- menu.html projectClass -->

<h1>parametersClass
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong></strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>This is a script file. </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment"></pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="parametersClass.html" class="code" title="">parametersClass</a>	</li>
</ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="domainsClass.html" class="code" title="">domainsClass</a>	</li>
<li><a href="parametersClass.html" class="code" title="">parametersClass</a>	</li>
<li><a href="projectClass.html" class="code" title="">projectClass</a>	</li>
</ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="#_sub1" class="code">function obj = parametersClass(varargin)</a></li>
<li><a href="#_sub2" class="code">function count = get.paramCount(obj)</a></li>
<li><a href="#_sub3" class="code">function names = getParamNames(obj)</a></li>
<li><a href="#_sub4" class="code">function obj = addParam(obj, varargin)</a></li>
<li><a href="#_sub5" class="code">function obj = removeParam(obj, row)</a></li>
<li><a href="#_sub6" class="code">function obj = setParameter(obj, row, varargin)</a></li>
<li><a href="#_sub7" class="code">function obj = setPrior(obj, row, varargin)</a></li>
<li><a href="#_sub8" class="code">function obj = setValue(obj, row, value)</a></li>
<li><a href="#_sub9" class="code">function obj = setName(obj, row, name)</a></li>
<li><a href="#_sub10" class="code">function obj = setConstr(obj, row, min, max)</a></li>
<li><a href="#_sub11" class="code">function obj = setFit(obj, row, fitFlag)</a></li>
<li><a href="#_sub12" class="code">function set.showPriors(obj, flag)</a></li>
<li><a href="#_sub13" class="code">function displayParametersTable(obj)</a></li>
<li><a href="#_sub14" class="code">function outStruct = toStruct(obj)</a></li>
<li><a href="#_sub15" class="code">function appendNewRow(obj, row)</a></li>
<li><a href="#_sub16" class="code">function removeRow(obj, row)</a></li>
<li><a href="#_sub17" class="code">function index = getValidRow(obj, row)</a></li>
<li><a href="#_sub18" class="code">function row = findRowIndex(name, tab)</a></li>
<li><a href="#_sub19" class="code">function inputBlock = parseParameterInput(varargin)</a></li>
</ul>


<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 classdef <a href="parametersClass.html" class="code" title="">parametersClass</a> &lt; handle
0002     <span class="comment">% This is the class definition for</span>
0003     <span class="comment">% the parameters block.</span>
0004     
0005     properties
0006         paramsTable = table
0007         showPriors = false
0008     <span class="keyword">end</span>
0009 
0010     properties(Access = private, Constant, Hidden)
0011         invalidPriorsMessage = sprintf(<span class="string">'Prior type must be a priorTypes enum or one of the following strings (%s)'</span>, <span class="keyword">...</span>
0012                                        strjoin(priorTypes.values(), <span class="string">', '</span>))
0013     <span class="keyword">end</span>
0014 
0015     properties (Access = private)   
0016         paramAutoNameCounter=1
0017     <span class="keyword">end</span>
0018     
0019     properties (Dependent)
0020         paramCount
0021     <span class="keyword">end</span>
0022     
0023     methods
0024         <a name="_sub0" href="#_subfunctions" class="code">function obj = parametersClass(varargin)</a>
0025             <span class="comment">% Class constructor.</span>
0026             <span class="comment">% Creates a Parameter object. The arguments should be</span>
0027             <span class="comment">% the content of the first parameter. A parameter consists of</span>
0028             <span class="comment">% a name (string), min (double), value (double), max (double),</span>
0029             <span class="comment">% fit flag (logical), prior type (string), mu (double), and</span>
0030             <span class="comment">% sigma (double) values in that order.</span>
0031             <span class="comment">% Default values are used when adding the parameter if no</span>
0032             <span class="comment">% arguments are provided, otherwise a subset of the arguments</span>
0033             <span class="comment">% can be provided.</span>
0034             <span class="comment">% The following are assumed from number of arguments:</span>
0035             <span class="comment">% for 1 input, the name only is provided</span>
0036             <span class="comment">% for 2 inputs, the name and value are provided</span>
0037             <span class="comment">% for 4 inputs, the name, min, value, and max are provided</span>
0038             <span class="comment">% for 5 inputs, the name, min, value, max, and fit? are provided</span>
0039             <span class="comment">% for 8 inputs, all parameter properties are provided</span>
0040             <span class="comment">%</span>
0041             <span class="comment">% params = parametersClass('Tails', 10, 20, 30, true, priorTypes.Uniform.value, 0, Inf);</span>
0042             sz = [0, 8];
0043             varTypes = {<span class="string">'string'</span>,<span class="string">'double'</span>,<span class="string">'double'</span>,<span class="string">'double'</span>,<span class="string">'logical'</span>,<span class="string">'string'</span>,<span class="string">'double'</span>,<span class="string">'double'</span>};
0044             varNames = {<span class="string">'Name'</span>,<span class="string">'Min'</span>,<span class="string">'Value'</span>,<span class="string">'Max'</span>,<span class="string">'Fit?'</span>,<span class="string">'Prior Type'</span>,<span class="string">'mu'</span>,<span class="string">'sigma'</span>};
0045             obj.paramsTable = table(<span class="string">'Size'</span>,sz,<span class="string">'VariableTypes'</span>,varTypes,<span class="string">'VariableNames'</span>,varNames);
0046             <span class="keyword">if</span> isempty(varargin)
0047                 obj.addParam();
0048             <span class="keyword">else</span>
0049                 obj.addParam(varargin{:});
0050             <span class="keyword">end</span>
0051         <span class="keyword">end</span>
0052         
0053         <a name="_sub1" href="#_subfunctions" class="code">function count = get.paramCount(obj)</a>
0054             count = height(obj.paramsTable);
0055         <span class="keyword">end</span>
0056         
0057         <a name="_sub2" href="#_subfunctions" class="code">function names = getParamNames(obj)</a>
0058             <span class="comment">% Returns a N x 1 cell array of names of the parameter</span>
0059             <span class="comment">% in the object.</span>
0060             <span class="comment">%</span>
0061             <span class="comment">% names = params.getParamNames();</span>
0062             names = obj.paramsTable{:,1}; 
0063         <span class="keyword">end</span>
0064         
0065         <a name="_sub3" href="#_subfunctions" class="code">function obj = addParam(obj, varargin)</a>
0066             <span class="comment">% Adds an new parameter to the parameters table. Default</span>
0067             <span class="comment">% values are used when adding the parameter if no arguments are</span>
0068             <span class="comment">% provided, otherwise a subset of the arguments can be provided.</span>
0069             <span class="comment">% The following are assumed from number of arguments:</span>
0070             <span class="comment">% for 1 input, the name only is provided</span>
0071             <span class="comment">% for 2 inputs, the name and value are provided</span>
0072             <span class="comment">% for 4 inputs, the name, min, value, and max are provided</span>
0073             <span class="comment">% for 5 inputs, the name, min, value, max, and fit? are provided</span>
0074             <span class="comment">% for 8 inputs, all parameter properties are provided</span>
0075             <span class="comment">%</span>
0076             <span class="comment">% params.addParam('Tails Roughness');</span>
0077             <span class="keyword">if</span> isempty(varargin)
0078                 <span class="comment">% No input parameter</span>
0079                 <span class="comment">% Add an empty parameter row</span>
0080                 name = sprintf(<span class="string">'new parameter %d'</span>,obj.paramAutoNameCounter);
0081                 newRow = {name,0,0,0,false,priorTypes.Uniform.value,0,Inf};
0082                 <a href="#_sub15" class="code" title="subfunction appendNewRow(obj, row)">appendNewRow</a>(obj,newRow);
0083             <span class="keyword">end</span>
0084             
0085             <span class="keyword">if</span> iscell(varargin) &amp;&amp; ~isempty(varargin)
0086                 inputCell = varargin;
0087                 
0088                 <span class="comment">% First input must be a parameter name</span>
0089                 <span class="keyword">if</span> ~isText(inputCell{1})
0090                     throw(invalidType(<span class="string">'First value must be param name (text)'</span>));
0091                 <span class="keyword">end</span>
0092                 
0093                 <span class="comment">% If length is 1, assume name only</span>
0094                 <span class="comment">% and fill in the rest with defaults</span>
0095                 name = inputCell{1};
0096                 values = [1, 2, 3];
0097                 fit = false;
0098                 priorType = priorTypes.Uniform.value;
0099                 priorValues = [0, Inf];
0100                 
0101                 <span class="keyword">switch</span> length(inputCell)
0102                     <span class="keyword">case</span> 1                           
0103                     <span class="keyword">case</span> 2
0104                         <span class="comment">% If length is 2, assume name and value</span>
0105                         <span class="comment">% pair. Fill in the rest automatically</span>
0106                         values = [inputCell{2} inputCell{2} inputCell{2}];
0107                     <span class="keyword">case</span> 4
0108                         <span class="comment">% If length is 4, assume we are getting the</span>
0109                         <span class="comment">% limits as well as the values</span>
0110                         values = [inputCell{2} inputCell{3} inputCell{4}]; 
0111                     <span class="keyword">case</span> 5
0112                          <span class="comment">% If length is 5, then assume we are setting</span>
0113                          <span class="comment">% everything except priors</span>
0114                         values = [inputCell{2} inputCell{3} inputCell{4}];
0115                         fit = inputCell{5};
0116                     <span class="keyword">case</span> 8
0117                         <span class="comment">% Case 8 must be everything including the prior</span>
0118                         values = [inputCell{2} inputCell{3} inputCell{4}];
0119                         fit = inputCell{5};
0120                         priorType = inputCell{6};
0121                         priorValues = [inputCell{7} inputCell{8}];
0122                        
0123                     <span class="comment">% If not one of these options, throw an error</span>
0124                     <span class="keyword">otherwise</span>
0125                         throw(invalidNumberOfInputs(<span class="string">'Unrecognised inputs to ''addParam'''</span>));
0126                 <span class="keyword">end</span>
0127                 
0128                 <span class="comment">% Type validation</span>
0129                 <span class="keyword">if</span> ~isnumeric(values)
0130                     throw(invalidType(<span class="string">'Expecting numeric values as params 2 - 4'</span>));
0131                 <span class="keyword">end</span>
0132                 
0133                 <span class="keyword">if</span> ~islogical(fit)
0134                     throw(invalidType(<span class="string">'Expecting logical value for param 5'</span>));
0135                 <span class="keyword">end</span>
0136                 
0137                 priorType = validateOption(priorType, <span class="string">'priorTypes'</span>, obj.invalidPriorsMessage).value;
0138                                
0139                 <span class="keyword">if</span> ~isnumeric(priorValues)
0140                     throw(invalidType(<span class="string">'Prior values must be numeric'</span>));
0141                 <span class="keyword">end</span>
0142                     
0143                 newRow = {name, values(1), values(2), values(3), fit, priorType, priorValues(1), priorValues(2)};
0144                 <a href="#_sub15" class="code" title="subfunction appendNewRow(obj, row)">appendNewRow</a>(obj, newRow);
0145             <span class="keyword">end</span>
0146         <span class="keyword">end</span>
0147         
0148         <a name="_sub4" href="#_subfunctions" class="code">function obj = removeParam(obj, row)</a>
0149             <span class="comment">% Removes a parameter from the parameters table.</span>
0150             <span class="comment">% Expects a single parameter name or index/array of parameter</span>
0151             <span class="comment">% names or indices to remove</span>
0152             <span class="comment">%</span>
0153             <span class="comment">% params.removeParam(2);</span>
0154             <span class="keyword">if</span> isa(row, <span class="string">'double'</span>)
0155                 row = num2cell(sort(row, <span class="string">'descend'</span>));
0156             <span class="keyword">elseif</span> isText(row)
0157                 row = cellstr(row);
0158             <span class="keyword">elseif</span> iscell(row)
0159             <span class="keyword">else</span>
0160                 throw(invalidType(<span class="string">'Unrecognised Row'</span>))
0161             <span class="keyword">end</span>
0162 
0163             <span class="keyword">for</span> i = 1:length(row)
0164                 obj.removeRow(row{i});
0165             <span class="keyword">end</span>
0166         <span class="keyword">end</span>
0167         
0168         <a name="_sub5" href="#_subfunctions" class="code">function obj = setParameter(obj, row, varargin)</a>
0169             <span class="comment">% General purpose set parameter method. Expects index or name</span>
0170             <span class="comment">% of parameter and keyword/value pairs to set</span>
0171             <span class="comment">%</span>
0172             <span class="comment">% params.setParameter(2, 'value', 50);</span>
0173 
0174             <span class="comment">% Always need three or more inputs to set parameter value</span>
0175             <span class="keyword">if</span> length(varargin) &lt; 2 || mod(length(varargin), 2) ~= 0
0176                 throw(invalidNumberOfInputs(<span class="string">'The input to ''setParameter'' should be a index/parameter name and a set of name-value pairs'</span>));
0177             <span class="keyword">end</span>
0178 
0179             row = obj.getValidRow(row);
0180             inputBlock = obj.parseParameterInput(varargin{:});
0181             
0182             <span class="keyword">if</span> ~isempty(inputBlock.name)
0183                 obj.setName(row, inputBlock.name);
0184             <span class="keyword">end</span>
0185             
0186             <span class="keyword">if</span> ~isempty(inputBlock.min)
0187                 max = obj.paramsTable{row, 4};
0188                 obj.setConstr(row, inputBlock.min, max);
0189             <span class="keyword">end</span>
0190             
0191             <span class="keyword">if</span> ~isempty(inputBlock.max)
0192                 min = obj.paramsTable{row, 2};
0193                 obj.setConstr(row, min, inputBlock.max);
0194             <span class="keyword">end</span>
0195             
0196             <span class="keyword">if</span> ~isempty(inputBlock.value)
0197                 obj.setValue(row, inputBlock.value);
0198             <span class="keyword">end</span>
0199             
0200             <span class="keyword">if</span> ~isempty(inputBlock.fit)
0201                 obj.setFit(row, inputBlock.fit);
0202             <span class="keyword">end</span>
0203 
0204         <span class="keyword">end</span>
0205         
0206         <a name="_sub6" href="#_subfunctions" class="code">function obj = setPrior(obj, row, varargin)</a>
0207             <span class="comment">% Sets the prior of an existing parameter. Expects index or</span>
0208             <span class="comment">% name of parameter and the new prior type ('uniform',</span>
0209             <span class="comment">% 'gaussian', 'jeffreys') with mu and sigma value if applicable</span>
0210             <span class="comment">%</span>
0211             <span class="comment">% params.setPrior(2, priorTypes.Gaussian, 1, 2);</span>
0212             inputValues = varargin;
0213             tab = obj.paramsTable;
0214             
0215             row = obj.getValidRow(row);
0216             priorType = validateOption(inputValues{1}, <span class="string">'priorTypes'</span>, obj.invalidPriorsMessage).value;
0217             <span class="keyword">switch</span> priorType
0218                 <span class="keyword">case</span> priorTypes.Uniform.value
0219                     tab(row,6) = {priorTypes.Uniform.value};
0220                     tab(row,7) = {0};
0221                     tab(row,8) = {Inf};
0222                     
0223                 <span class="keyword">case</span> priorTypes.Gaussian.value
0224                     tab(row,6) = {priorTypes.Gaussian.value};             
0225                     tab(row,7) = inputValues(2);
0226                     tab(row,8) = inputValues(3);
0227             <span class="keyword">end</span>
0228     
0229             obj.paramsTable = tab;
0230             
0231         <span class="keyword">end</span>
0232         
0233         <a name="_sub7" href="#_subfunctions" class="code">function obj = setValue(obj, row, value)</a>
0234             <span class="comment">% Sets the value of an existing parameter. Expects index or</span>
0235             <span class="comment">% name of parameter and the new value</span>
0236             <span class="comment">%</span>
0237             <span class="comment">% params.setValue(2, 3.4);</span>
0238             tab = obj.paramsTable;           
0239             row = obj.getValidRow(row);
0240 
0241             <span class="keyword">if</span> ~isnumeric(value)
0242                 throw(invalidType(<span class="string">'Value must be numeric'</span>));
0243             <span class="keyword">end</span>
0244 
0245             tab(row,3) = {value};
0246             obj.paramsTable = tab;
0247         <span class="keyword">end</span>
0248         
0249         <a name="_sub8" href="#_subfunctions" class="code">function obj = setName(obj, row, name)</a>
0250             <span class="comment">% Sets the name of an existing parameter.</span>
0251             <span class="comment">% Expects index or name of parameter and the new name</span>
0252             <span class="comment">%</span>
0253             <span class="comment">% params.setName(2, 'new name');</span>
0254             tab = obj.paramsTable;           
0255             row = obj.getValidRow(row);
0256 
0257             <span class="keyword">if</span> ~isText(name)
0258                 throw(invalidType(<span class="string">'New name must be char'</span>));
0259             <span class="keyword">end</span>
0260 
0261             tab(row, 1) = {name};
0262             obj.paramsTable = tab;
0263         <span class="keyword">end</span>
0264         
0265         <a name="_sub9" href="#_subfunctions" class="code">function obj = setConstr(obj, row, min, max)</a>
0266             <span class="comment">% Sets the constraints of an existing parameter. Expects index</span>
0267             <span class="comment">% or name of parameter and new min and max of the parameter's</span>
0268             <span class="comment">% value</span>
0269             <span class="comment">%</span>
0270             <span class="comment">% params.setConstr({2, 0, 100});</span>
0271             tab = obj.paramsTable;
0272             row = obj.getValidRow(row);
0273 
0274             <span class="keyword">if</span> ~(isnumeric(min) &amp;&amp; isnumeric(max))
0275                 throw(invalidType(<span class="string">'min and max need to be numeric'</span>));
0276             <span class="keyword">end</span>
0277             
0278             tab(row, 2) = {min};
0279             tab(row, 4) = {max};
0280             obj.paramsTable = tab;
0281         <span class="keyword">end</span>
0282                 
0283         <a name="_sub10" href="#_subfunctions" class="code">function obj = setFit(obj, row, fitFlag)</a>
0284             <span class="comment">% Sets the 'fit' to off or on for parameter.</span>
0285             <span class="comment">% Expects index or name of parameter and new fit flag</span>
0286             <span class="comment">%</span>
0287             <span class="comment">% params.setFit(2, true);</span>
0288             tab = obj.paramsTable;
0289             row = obj.getValidRow(row);
0290 
0291             <span class="keyword">if</span> ~islogical(fitFlag)
0292                 throw(invalidType(<span class="string">'Need true or false for Fit? value'</span>));
0293             <span class="keyword">end</span>
0294            
0295             tab(row, 5) = {fitFlag};
0296             obj.paramsTable = tab;
0297         <span class="keyword">end</span>
0298         
0299         <a name="_sub11" href="#_subfunctions" class="code">function set.showPriors(obj, flag)</a>
0300             <span class="comment">% Setter for the showPriors property</span>
0301             <span class="keyword">if</span> ~islogical(flag)
0302                 throw(invalidType(<span class="string">'Show priors must be true or false'</span>));
0303             <span class="keyword">end</span>
0304             obj.showPriors = flag;
0305         <span class="keyword">end</span>
0306         
0307         <a name="_sub12" href="#_subfunctions" class="code">function displayParametersTable(obj)</a>
0308             <span class="comment">% Displays the parameter table</span>
0309             array = obj.paramsTable;
0310             p = 1:size(array,1);
0311             p = p(:);
0312             p = table(p);
0313             <span class="keyword">if</span> ~obj.showPriors
0314                 array = array(:,1:5);
0315             <span class="keyword">end</span>
0316             all = [p array];
0317             disp(all);
0318         <span class="keyword">end</span>
0319         
0320         
0321         <a name="_sub13" href="#_subfunctions" class="code">function outStruct = toStruct(obj)</a>
0322             <span class="comment">% Converts the class parameters into a structure array.</span>
0323             paramNames = table2cell(obj.paramsTable(:,1));
0324             
0325             <span class="comment">% Want these to be class 'char' rather than 'string'</span>
0326             <span class="keyword">for</span> n = 1:length(paramNames)
0327                 paramNames{n} = char(paramNames{n});
0328             <span class="keyword">end</span>
0329             outStruct.paramNames = paramNames;
0330             
0331             outStruct.nParams = size(obj.paramsTable,1);
0332             
0333             mins = obj.paramsTable{:,2};
0334             maxs = obj.paramsTable{:,4};
0335             constr = cell([1, length(mins)]);
0336             <span class="keyword">for</span> i = 1:length(mins)
0337                 constr{i} = [mins(i) maxs(i)];
0338             <span class="keyword">end</span>
0339             
0340             <span class="comment">%constr = [mins maxs];</span>
0341             outStruct.paramConstr = constr;
0342             
0343             outStruct.params = obj.paramsTable{:,3};
0344             
0345             outStruct.fitYesNo = double(obj.paramsTable{:,5});
0346             
0347             priors = table2cell(obj.paramsTable(:,6:8));
0348             priors = [outStruct.paramNames priors];
0349             
0350             <span class="comment">% Group each row into one cell. Should be a way of doing this</span>
0351             <span class="comment">% without a loop but I can't quite see it right now...</span>
0352             pp = cell([1, size(priors, 1)]);
0353             <span class="keyword">for</span> i = 1:size(priors, 1)
0354                 thisPrior = priors(i,:);
0355                 val2 = char(thisPrior{2});
0356                 thisPrior{2} = val2;
0357                 pp(i) = {thisPrior};
0358             <span class="keyword">end</span>
0359             
0360             outStruct.priors = pp(:);
0361             
0362             
0363             <span class="comment">% Need to force some of the outputs</span>
0364             <span class="comment">% to be row vectors, so transpose them</span>
0365             outStruct.paramNames = outStruct.paramNames';
0366             <span class="comment">%outStruct.paramConstr = outStruct.paramConstr;</span>
0367             outStruct.params = outStruct.params';
0368             outStruct.fitYesNo = outStruct.fitYesNo';
0369             
0370             <span class="comment">% Fields order needs to be...</span>
0371             
0372             <span class="comment">% paramNames</span>
0373             <span class="comment">% nParams</span>
0374             <span class="comment">% paramConstr</span>
0375             <span class="comment">% params</span>
0376             <span class="comment">% fitYesNo</span>
0377             <span class="comment">% priors</span>
0378         <span class="keyword">end</span>
0379         
0380     <span class="keyword">end</span>
0381     
0382     
0383     methods (Access = protected)
0384         
0385         <a name="_sub14" href="#_subfunctions" class="code">function appendNewRow(obj, row)</a>
0386             <span class="comment">% Appends a new row to the table. Expects a cell array</span>
0387             <span class="comment">% with row values to append</span>
0388             <span class="comment">%</span>
0389             <span class="comment">% obj.appendNewRow({'Tails', 10, 20, 30, true, 'uniform', 0, Inf})</span>
0390             tab = obj.paramsTable;
0391             newName = row{1};
0392             <span class="keyword">if</span> any(strcmp(newName,tab{:,1}))
0393                 throw(duplicateName(<span class="string">'Duplicate parameter names not allowed'</span>));
0394             <span class="keyword">end</span>
0395             tab = [tab ; row];
0396             obj.paramsTable = tab;
0397             obj.paramAutoNameCounter = obj.paramAutoNameCounter + 1;
0398         <span class="keyword">end</span>
0399         
0400         <a name="_sub15" href="#_subfunctions" class="code">function removeRow(obj, row)</a>
0401             <span class="comment">% Removes a specified row of the table. Expects</span>
0402             <span class="comment">% index or name of row to remove</span>
0403             <span class="comment">%</span>
0404             <span class="comment">% obj.removeRow(1)</span>
0405             tab = obj.paramsTable;
0406             
0407             <span class="keyword">if</span> isText(row)
0408                 <span class="comment">% Assume a row name</span>
0409                 index = strcmp(row, tab{:,1});
0410                 <span class="keyword">if</span> ~any(index)
0411                     throw(nameNotRecognised(<span class="string">'Unrecognised parameter name'</span>));
0412                 <span class="keyword">end</span>
0413                 row = find(index);
0414             <span class="keyword">end</span>
0415             
0416             <span class="keyword">if</span> (row &lt; 1) || (row &gt; obj.paramCount)
0417                 throw(indexOutOfRange(sprintf(<span class="string">'Row index out out of range 1 - %d'</span>, obj.paramCount)));
0418             <span class="keyword">end</span>
0419             
0420             tab(row, :) = [];
0421             obj.paramsTable = tab;   
0422         <span class="keyword">end</span>
0423         
0424         <a name="_sub16" href="#_subfunctions" class="code">function index = getValidRow(obj, row)</a>
0425             <span class="comment">% Gets valid row with given name or index</span>
0426             <span class="comment">%</span>
0427             <span class="comment">% obj.getValidRow('param name')</span>
0428             <span class="keyword">if</span> isText(row)
0429                 index = obj.findRowIndex(row, obj.paramsTable);
0430             <span class="keyword">else</span>
0431                 index = row;
0432                 <span class="keyword">if</span> (index &lt; 1) || (index &gt; obj.paramCount)
0433                     throw(indexOutOfRange(sprintf(<span class="string">'Row index out out of range 1 - %d'</span>, obj.paramCount)));
0434                 <span class="keyword">end</span>     
0435             <span class="keyword">end</span>
0436         <span class="keyword">end</span>
0437     <span class="keyword">end</span>
0438 
0439     methods (Static)
0440         <a name="_sub17" href="#_subfunctions" class="code">function row = findRowIndex(name, tab)</a>
0441             <span class="comment">% Gets index with given row name from table.</span>
0442             <span class="comment">%</span>
0443             <span class="comment">% obj.findRowIndex('param')</span>
0444             namesList = tab{:,1};
0445             
0446             <span class="comment">% Strip leading or trailing white spaces from names and name</span>
0447             namesList = strip(namesList);
0448             name = strip(name);
0449             
0450             <span class="comment">% Compare 'name' to list ignoring case</span>
0451             index = strcmpi(name, namesList);
0452             <span class="keyword">if</span> ~any(index)
0453                 throw(nameNotRecognised(<span class="string">'Unrecognised parameter name'</span>));
0454             <span class="keyword">end</span>
0455             
0456             <span class="comment">% Non-zero value in array is the row index</span>
0457             row = find(index);
0458         <span class="keyword">end</span>
0459         
0460         
0461         <a name="_sub18" href="#_subfunctions" class="code">function inputBlock = parseParameterInput(varargin)</a>
0462             <span class="comment">% Parses parameter keyword/value pairs into a structure.</span>
0463             <span class="comment">%</span>
0464             <span class="comment">% obj.parseParameterInput('name', 'param')</span>
0465             defaultName = <span class="string">''</span>;
0466             defaultMin = [];
0467             defaultMax = [];   
0468             defaultValue = [];
0469             defaultFit = [];
0470         
0471             p = inputParser;
0472             addParameter(p,<span class="string">'name'</span>,  defaultName,   @isText);
0473             addParameter(p,<span class="string">'min'</span>,   defaultMin,    @isnumeric);
0474             addParameter(p,<span class="string">'value'</span>, defaultValue,  @isnumeric);
0475             addParameter(p,<span class="string">'max'</span>,   defaultMax,    @isnumeric);
0476             addParameter(p,<span class="string">'fit'</span>,   defaultFit,    @islogical);
0477                        
0478             parse(p, varargin{:});
0479             inputBlock = p.Results;
0480         <span class="keyword">end</span>
0481         
0482     <span class="keyword">end</span>
0483 
0484 <span class="keyword">end</span>
</pre></div>

<hr><address>Generated on Wed 10-May-2023 12:43:42 by <strong><a href="https://github.com/gllmflndn/m2html">m2html</a></strong> &copy; 2003-2022</address>
</body>
</html>

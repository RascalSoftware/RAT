<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of parametersClass</title>
  <meta name="keywords" content="parametersClass">
  <meta name="description" content="">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2003-2019 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- ../menu.html API -->
<!-- menu.html projectClass -->

<h1>parametersClass
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong></strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>This is a script file. </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment"></pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="parametersClass.html" class="code" title="">parametersClass</a>	</li>
<li><a href="tableUtilities.html" class="code" title="">tableUtilities</a>	</li>
</ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="domainsClass.html" class="code" title="">domainsClass</a>	</li>
<li><a href="parametersClass.html" class="code" title="">parametersClass</a>	</li>
<li><a href="projectClass.html" class="code" title="">projectClass</a>	</li>
</ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="#_sub1" class="code">function obj = parametersClass(varargin)</a></li>
<li><a href="#_sub2" class="code">function obj = addParameter(obj, varargin)</a></li>
<li><a href="#_sub3" class="code">function obj = removeParameter(obj, row)</a></li>
<li><a href="#_sub4" class="code">function obj = setParameter(obj, row, varargin)</a></li>
<li><a href="#_sub5" class="code">function obj = setPrior(obj, row, varargin)</a></li>
<li><a href="#_sub6" class="code">function obj = setValue(obj, row, value)</a></li>
<li><a href="#_sub7" class="code">function obj = setName(obj, row, name)</a></li>
<li><a href="#_sub8" class="code">function obj = setLimits(obj, row, min, max)</a></li>
<li><a href="#_sub9" class="code">function obj = setFit(obj, row, fitFlag)</a></li>
<li><a href="#_sub10" class="code">function set.showPriors(obj, flag)</a></li>
<li><a href="#_sub11" class="code">function displayTable(obj)</a></li>
<li><a href="#_sub12" class="code">function outStruct = toStruct(obj)</a></li>
<li><a href="#_sub13" class="code">function index = getValidRow(obj, row)</a></li>
<li><a href="#_sub14" class="code">function inputBlock = parseParameterInput(~, varargin)</a></li>
</ul>


<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 classdef <a href="parametersClass.html" class="code" title="">parametersClass</a> &lt; <a href="tableUtilities.html" class="code" title="">tableUtilities</a>
0002     <span class="comment">% This is the class definition for</span>
0003     <span class="comment">% the parameters block.</span>
0004     
0005     properties
0006         showPriors = false
0007     <span class="keyword">end</span>
0008 
0009     properties(Access = private, Constant, Hidden)
0010         invalidPriorsMessage = sprintf(<span class="string">'Prior type must be a priorTypes enum or one of the following strings (%s)'</span>, <span class="keyword">...</span>
0011                                        strjoin(priorTypes.values(), <span class="string">', '</span>))
0012     <span class="keyword">end</span>
0013     
0014     methods
0015         <a name="_sub0" href="#_subfunctions" class="code">function obj = parametersClass(varargin)</a>
0016             <span class="comment">% Class constructor.</span>
0017             <span class="comment">% Creates a Parameter object. The arguments should be</span>
0018             <span class="comment">% the content of the first parameter. A parameter consists of</span>
0019             <span class="comment">% a name (string), min (double), value (double), max (double),</span>
0020             <span class="comment">% fit flag (logical), prior type (string), mu (double), and</span>
0021             <span class="comment">% sigma (double) values in that order.</span>
0022             <span class="comment">% Default values are used when adding the parameter if no</span>
0023             <span class="comment">% arguments are provided, otherwise a subset of the arguments</span>
0024             <span class="comment">% can be provided.</span>
0025             <span class="comment">% The following are assumed from number of arguments:</span>
0026             <span class="comment">% for 1 input, the name only is provided</span>
0027             <span class="comment">% for 2 inputs, the name and value are provided</span>
0028             <span class="comment">% for 4 inputs, the name, min, value, and max are provided</span>
0029             <span class="comment">% for 5 inputs, the name, min, value, max, and fit? are provided</span>
0030             <span class="comment">% for 8 inputs, all parameter properties are provided</span>
0031             <span class="comment">%</span>
0032             <span class="comment">% params = parametersClass('Tails', 10, 20, 30, true, priorTypes.Uniform.value, 0, Inf);</span>
0033             sz = [0, 8];
0034             varTypes = {<span class="string">'string'</span>,<span class="string">'double'</span>,<span class="string">'double'</span>,<span class="string">'double'</span>,<span class="string">'logical'</span>,<span class="string">'string'</span>,<span class="string">'double'</span>,<span class="string">'double'</span>};
0035             varNames = {<span class="string">'Name'</span>,<span class="string">'Min'</span>,<span class="string">'Value'</span>,<span class="string">'Max'</span>,<span class="string">'Fit?'</span>,<span class="string">'Prior Type'</span>,<span class="string">'mu'</span>,<span class="string">'sigma'</span>};
0036             obj.varTable = table(<span class="string">'Size'</span>,sz,<span class="string">'VariableTypes'</span>,varTypes,<span class="string">'VariableNames'</span>,varNames);
0037             <span class="keyword">if</span> isempty(varargin)
0038                 obj.addParameter();
0039             <span class="keyword">else</span>
0040                 obj.addParameter(varargin{:});
0041             <span class="keyword">end</span>
0042         <span class="keyword">end</span>
0043         
0044         <a name="_sub1" href="#_subfunctions" class="code">function obj = addParameter(obj, varargin)</a>
0045             <span class="comment">% Adds an new parameter to the parameters table. Default</span>
0046             <span class="comment">% values are used when adding the parameter if no arguments are</span>
0047             <span class="comment">% provided, otherwise a subset of the arguments can be provided.</span>
0048             <span class="comment">% The following are assumed from number of arguments:</span>
0049             <span class="comment">% for 1 input, the name only is provided</span>
0050             <span class="comment">% for 2 inputs, the name and value are provided</span>
0051             <span class="comment">% for 4 inputs, the name, min, value, and max are provided</span>
0052             <span class="comment">% for 5 inputs, the name, min, value, max, and fit? are provided</span>
0053             <span class="comment">% for 8 inputs, all parameter properties are provided</span>
0054             <span class="comment">%</span>
0055             <span class="comment">% params.addParameter('Tails Roughness');</span>
0056             <span class="keyword">if</span> isempty(varargin)
0057                 <span class="comment">% No input parameter</span>
0058                 <span class="comment">% Add an empty parameter row</span>
0059                 name = sprintf(<span class="string">'new parameter %d'</span>,obj.autoNameCounter);
0060                 newRow = {name,0,0,0,false,priorTypes.Uniform.value,0,Inf};
0061                 obj.addRow(newRow{:});
0062             <span class="keyword">end</span>
0063             
0064             <span class="keyword">if</span> iscell(varargin) &amp;&amp; ~isempty(varargin)
0065                 inputCell = varargin;
0066                 
0067                 <span class="comment">% First input must be a parameter name</span>
0068                 <span class="keyword">if</span> ~isText(inputCell{1})
0069                     throw(exceptions.invalidType(<span class="string">'First value must be param name (text)'</span>));
0070                 <span class="keyword">end</span>
0071                 
0072                 <span class="comment">% If length is 1, assume name only</span>
0073                 <span class="comment">% and fill in the rest with defaults</span>
0074                 name = inputCell{1};
0075                 values = [1, 2, 3];
0076                 fit = false;
0077                 priorType = priorTypes.Uniform.value;
0078                 priorValues = [0, Inf];
0079                 
0080                 <span class="keyword">switch</span> length(inputCell)
0081                     <span class="keyword">case</span> 1                           
0082                     <span class="keyword">case</span> 2
0083                         <span class="comment">% If length is 2, assume name and value</span>
0084                         <span class="comment">% pair. Fill in the rest automatically</span>
0085                         values = [inputCell{2} inputCell{2} inputCell{2}];
0086                     <span class="keyword">case</span> 4
0087                         <span class="comment">% If length is 4, assume we are getting the</span>
0088                         <span class="comment">% limits as well as the values</span>
0089                         values = [inputCell{2} inputCell{3} inputCell{4}]; 
0090                     <span class="keyword">case</span> 5
0091                          <span class="comment">% If length is 5, then assume we are setting</span>
0092                          <span class="comment">% everything except priors</span>
0093                         values = [inputCell{2} inputCell{3} inputCell{4}];
0094                         fit = inputCell{5};
0095                     <span class="keyword">case</span> 8
0096                         <span class="comment">% Case 8 must be everything including the prior</span>
0097                         values = [inputCell{2} inputCell{3} inputCell{4}];
0098                         fit = inputCell{5};
0099                         priorType = inputCell{6};
0100                         priorValues = [inputCell{7} inputCell{8}];
0101                        
0102                     <span class="comment">% If not one of these options, throw an error</span>
0103                     <span class="keyword">otherwise</span>
0104                         throw(exceptions.invalidNumberOfInputs(<span class="string">'Unrecognised inputs to ''addParameter'''</span>));
0105                 <span class="keyword">end</span>
0106                 
0107                 <span class="comment">% Type validation</span>
0108                 <span class="keyword">if</span> ~isnumeric(values)
0109                     throw(exceptions.invalidType(<span class="string">'Expecting numeric values as params 2 - 4'</span>));
0110                 <span class="keyword">end</span>
0111                 
0112                 <span class="keyword">if</span> values(1) &gt; values(3)
0113                     throw(exceptions.invalidValue(sprintf(<span class="string">'Lower limit %f must be less than or equal to upper limit %f'</span>, values(1), values(3))));
0114                 <span class="keyword">end</span>
0115 
0116                 <span class="keyword">if</span> values(2) &lt; values(1) || values(2) &gt; values(3)
0117                     throw(exceptions.invalidValue(sprintf(<span class="string">'Parameter value %f must be within the limits %f -- %f'</span>, values(2), values(1), values(3))));
0118                 <span class="keyword">end</span>
0119 
0120                 <span class="keyword">if</span> ~islogical(fit)
0121                     throw(exceptions.invalidType(<span class="string">'Expecting logical value for param 5'</span>));
0122                 <span class="keyword">end</span>
0123                 
0124                 priorType = validateOption(priorType, <span class="string">'priorTypes'</span>, obj.invalidPriorsMessage).value;
0125                                
0126                 <span class="keyword">if</span> ~isnumeric(priorValues)
0127                     throw(exceptions.invalidType(<span class="string">'Prior values must be numeric'</span>));
0128                 <span class="keyword">end</span>
0129                     
0130                 newRow = {name, values(1), values(2), values(3), fit, priorType, priorValues(1), priorValues(2)};
0131                 obj.addRow(newRow{:});
0132             <span class="keyword">end</span>
0133         <span class="keyword">end</span>
0134         
0135         <a name="_sub2" href="#_subfunctions" class="code">function obj = removeParameter(obj, row)</a>
0136             <span class="comment">% Removes a parameter from the parameters table.</span>
0137             <span class="comment">% Expects a single parameter name or index/array of parameter</span>
0138             <span class="comment">% names or indices to remove</span>
0139             <span class="comment">%</span>
0140             <span class="comment">% params.removeParameter(2);</span>
0141 
0142             <span class="comment">% Arrange parameters into a cell array</span>
0143             <span class="keyword">if</span> isa(row, <span class="string">'double'</span>)
0144                 row = num2cell(sort(row, <span class="string">'descend'</span>));
0145             <span class="keyword">elseif</span> isText(row)
0146                 row = cellstr(row);
0147             <span class="keyword">elseif</span> iscell(row)
0148             <span class="keyword">else</span>
0149                 throw(exceptions.invalidType(<span class="string">'Unrecognised Row'</span>))
0150             <span class="keyword">end</span>
0151 
0152             <span class="comment">% Find index for each parameter and remove from table</span>
0153             rowNames = obj.varTable{:,1};
0154             <span class="keyword">for</span> i = 1:length(row)
0155                 currentRow = row{i};
0156 
0157                 <span class="keyword">if</span> isText(currentRow)
0158                     currentRow = obj.findRowIndex(currentRow, rowNames, <span class="string">'Unrecognised parameter name'</span>);
0159                 <span class="keyword">end</span>
0160 
0161                 obj.removeRow(currentRow);
0162             <span class="keyword">end</span>
0163 
0164         <span class="keyword">end</span>
0165         
0166         <a name="_sub3" href="#_subfunctions" class="code">function obj = setParameter(obj, row, varargin)</a>
0167             <span class="comment">% General purpose set parameter method. Expects index or name</span>
0168             <span class="comment">% of parameter and keyword/value pairs to set</span>
0169             <span class="comment">%</span>
0170             <span class="comment">% params.setParameter(2, 'value', 50);</span>
0171 
0172             <span class="comment">% Always need three or more inputs to set parameter value</span>
0173             <span class="keyword">if</span> length(varargin) &lt; 2 || mod(length(varargin), 2) ~= 0
0174                 throw(exceptions.invalidNumberOfInputs(<span class="string">'The input to ''setParameter'' should be a index/parameter name and a set of name-value pairs'</span>));
0175             <span class="keyword">end</span>
0176 
0177             row = obj.getValidRow(row);
0178             inputBlock = <a href="#_sub14" class="code" title="subfunction inputBlock = parseParameterInput(~, varargin)">parseParameterInput</a>(obj, varargin{:});
0179 
0180             <span class="comment">% Check value lies within limits</span>
0181             <span class="keyword">if</span> ~isempty(inputBlock.min)
0182                 min = inputBlock.min;
0183             <span class="keyword">else</span>
0184                 min = obj.varTable{row, 2};
0185             <span class="keyword">end</span>
0186 
0187             <span class="keyword">if</span> ~isempty(inputBlock.max)
0188                 max = inputBlock.max;
0189             <span class="keyword">else</span>
0190                 max = obj.varTable{row, 4};
0191             <span class="keyword">end</span>
0192 
0193             <span class="keyword">if</span> ~isempty(inputBlock.value)
0194                 value = inputBlock.value;
0195             <span class="keyword">else</span>
0196                 value = obj.varTable{row, 2};
0197             <span class="keyword">end</span>
0198 
0199             <span class="keyword">if</span> min &gt; max
0200                 throw(exceptions.invalidValue(sprintf(<span class="string">'Lower limit %f must be less than or equal to upper limit %f'</span>, min, max)));
0201             <span class="keyword">end</span>
0202 
0203             <span class="keyword">if</span> value &lt; min || value &gt; max
0204                 throw(exceptions.invalidValue(sprintf(<span class="string">'Parameter value %f must be within the limits %f -- %f'</span>, value, min, max)));
0205             <span class="keyword">end</span>
0206 
0207             <span class="comment">% Apply values</span>
0208             <span class="keyword">if</span> ~isempty(inputBlock.name)
0209                 obj.setName(row, inputBlock.name);
0210             <span class="keyword">end</span>
0211             
0212             <span class="comment">% If both limits are set, apply them together to ensure check</span>
0213             <span class="comment">% works correctly</span>
0214             <span class="keyword">if</span> ~isempty(inputBlock.min) &amp;&amp; ~isempty(inputBlock.max)
0215                 obj.setLimits(row, inputBlock.min, inputBlock.max);
0216             <span class="keyword">else</span>
0217                 <span class="keyword">if</span> ~isempty(inputBlock.min)
0218                     max = obj.varTable{row, 4};
0219                     obj.setLimits(row, inputBlock.min, max);
0220                 <span class="keyword">end</span>
0221                 
0222                 <span class="keyword">if</span> ~isempty(inputBlock.max)
0223                     min = obj.varTable{row, 2};
0224                     obj.setLimits(row, min, inputBlock.max);
0225                 <span class="keyword">end</span>
0226             <span class="keyword">end</span>
0227             
0228             <span class="keyword">if</span> ~isempty(inputBlock.value)
0229                 obj.setValue(row, inputBlock.value);
0230             <span class="keyword">end</span>
0231             
0232             <span class="keyword">if</span> ~isempty(inputBlock.fit)
0233                 obj.setFit(row, inputBlock.fit);
0234             <span class="keyword">end</span>
0235 
0236         <span class="keyword">end</span>
0237         
0238         <a name="_sub4" href="#_subfunctions" class="code">function obj = setPrior(obj, row, varargin)</a>
0239             <span class="comment">% Sets the prior of an existing parameter. Expects index or</span>
0240             <span class="comment">% name of parameter and the new prior type ('uniform',</span>
0241             <span class="comment">% 'gaussian', 'jeffreys') with mu and sigma value if applicable</span>
0242             <span class="comment">%</span>
0243             <span class="comment">% params.setPrior(2, priorTypes.Gaussian, 1, 2);</span>
0244             inputValues = varargin;
0245             tab = obj.varTable;
0246             
0247             row = obj.getValidRow(row);
0248             priorType = validateOption(inputValues{1}, <span class="string">'priorTypes'</span>, obj.invalidPriorsMessage).value;
0249             <span class="keyword">switch</span> priorType
0250                 <span class="keyword">case</span> priorTypes.Uniform.value
0251                     tab(row,6) = {priorTypes.Uniform.value};
0252                     tab(row,7) = {0};
0253                     tab(row,8) = {Inf};
0254                     
0255                 <span class="keyword">case</span> priorTypes.Gaussian.value
0256                     tab(row,6) = {priorTypes.Gaussian.value};             
0257                     tab(row,7) = inputValues(2);
0258                     tab(row,8) = inputValues(3);
0259             <span class="keyword">end</span>
0260     
0261             obj.varTable = tab;
0262             
0263         <span class="keyword">end</span>
0264         
0265         <a name="_sub5" href="#_subfunctions" class="code">function obj = setValue(obj, row, value)</a>
0266             <span class="comment">% Sets the value of an existing parameter. Expects index or</span>
0267             <span class="comment">% name of parameter and the new value</span>
0268             <span class="comment">%</span>
0269             <span class="comment">% params.setValue(2, 3.4);</span>
0270             tab = obj.varTable;           
0271             row = obj.getValidRow(row);
0272             min = tab{row, 2};
0273             max = tab{row, 4};
0274 
0275             <span class="keyword">if</span> ~isnumeric(value)
0276                 throw(exceptions.invalidType(<span class="string">'Value must be numeric'</span>));
0277             <span class="keyword">end</span>
0278 
0279             <span class="keyword">if</span> value &lt; min || value &gt; max
0280                 throw(exceptions.invalidValue(sprintf(<span class="string">'Parameter value %f must be within the limits %f -- %f'</span>, value, min, max)));
0281             <span class="keyword">end</span>
0282 
0283             tab(row,3) = {value};
0284             obj.varTable = tab;
0285         <span class="keyword">end</span>
0286         
0287         <a name="_sub6" href="#_subfunctions" class="code">function obj = setName(obj, row, name)</a>
0288             <span class="comment">% Sets the name of an existing parameter.</span>
0289             <span class="comment">% Expects index or name of parameter and the new name</span>
0290             <span class="comment">%</span>
0291             <span class="comment">% params.setName(2, 'new name');</span>
0292             tab = obj.varTable;           
0293             row = obj.getValidRow(row);
0294 
0295             <span class="keyword">if</span> ~isText(name)
0296                 throw(exceptions.invalidType(<span class="string">'New name must be char'</span>));
0297             <span class="keyword">end</span>
0298 
0299             tab(row, 1) = {name};
0300             obj.varTable = tab;
0301         <span class="keyword">end</span>
0302         
0303         <a name="_sub7" href="#_subfunctions" class="code">function obj = setLimits(obj, row, min, max)</a>
0304             <span class="comment">% Sets the limits of an existing parameter. Expects index</span>
0305             <span class="comment">% or name of parameter and new min and max of the parameter's</span>
0306             <span class="comment">% value</span>
0307             <span class="comment">%</span>
0308             <span class="comment">% params.setLimits({2, 0, 100});</span>
0309             tab = obj.varTable;
0310             row = obj.getValidRow(row);
0311 
0312             <span class="keyword">if</span> ~(isnumeric(min) &amp;&amp; isnumeric(max))
0313                 throw(exceptions.invalidType(<span class="string">'min and max need to be numeric'</span>));
0314             <span class="keyword">end</span>
0315 
0316             <span class="keyword">if</span> min &gt; max
0317                 throw(exceptions.invalidValue(sprintf(<span class="string">'Lower limit %f must be less than or equal to upper limit %f'</span>, min, max)));
0318             <span class="keyword">end</span>
0319             
0320             tab(row, 2) = {min};
0321             tab(row, 4) = {max};
0322             obj.varTable = tab;
0323         <span class="keyword">end</span>
0324                 
0325         <a name="_sub8" href="#_subfunctions" class="code">function obj = setFit(obj, row, fitFlag)</a>
0326             <span class="comment">% Sets the 'fit' to off or on for parameter.</span>
0327             <span class="comment">% Expects index or name of parameter and new fit flag</span>
0328             <span class="comment">%</span>
0329             <span class="comment">% params.setFit(2, true);</span>
0330             tab = obj.varTable;
0331             row = obj.getValidRow(row);
0332 
0333             <span class="keyword">if</span> ~islogical(fitFlag)
0334                 throw(exceptions.invalidType(<span class="string">'Need true or false for Fit? value'</span>));
0335             <span class="keyword">end</span>
0336            
0337             tab(row, 5) = {fitFlag};
0338             obj.varTable = tab;
0339         <span class="keyword">end</span>
0340         
0341         <a name="_sub9" href="#_subfunctions" class="code">function set.showPriors(obj, flag)</a>
0342             <span class="comment">% Setter for the showPriors property</span>
0343             <span class="keyword">if</span> ~islogical(flag)
0344                 throw(exceptions.invalidType(<span class="string">'Show priors must be true or false'</span>));
0345             <span class="keyword">end</span>
0346             obj.showPriors = flag;
0347         <span class="keyword">end</span>
0348         
0349         <a name="_sub10" href="#_subfunctions" class="code">function displayTable(obj)</a>
0350             <span class="comment">% Displays the parameter table</span>
0351             array = obj.varTable;
0352             numParams = height(obj.varTable);
0353             <span class="keyword">if</span> ~obj.showPriors
0354                 array = array(:,1:5);
0355             <span class="keyword">end</span>
0356 
0357             <span class="keyword">if</span> numParams == 0
0358                 array(1, :) = repmat({<span class="string">''</span>}, 1, width(obj.varTable));
0359             <span class="keyword">else</span>
0360                 p = 1:numParams;
0361                 p = p(:);
0362                 p = table(p);
0363                 array = [p array];
0364             <span class="keyword">end</span>
0365 
0366             disp(array);
0367         <span class="keyword">end</span>
0368         
0369         
0370         <a name="_sub11" href="#_subfunctions" class="code">function outStruct = toStruct(obj)</a>
0371             <span class="comment">% Converts the class parameters into a structure array.</span>
0372             names = table2cell(obj.varTable(:,1));
0373             
0374             <span class="comment">% Want these to be class 'char' rather than 'string'</span>
0375             <span class="keyword">for</span> n = 1:length(names)
0376                 names{n} = char(names{n});
0377             <span class="keyword">end</span>
0378             outStruct.names = names;
0379             
0380             mins = obj.varTable{:,2};
0381             maxs = obj.varTable{:,4};
0382             limits = cell([1, length(mins)]);
0383             <span class="keyword">for</span> i = 1:length(mins)
0384                 limits{i} = [mins(i) maxs(i)];
0385             <span class="keyword">end</span>
0386             
0387             outStruct.limits = limits;
0388             
0389             outStruct.values = obj.varTable{:,3};
0390             
0391             outStruct.fit = double(obj.varTable{:,5});
0392             
0393             priors = table2cell(obj.varTable(:,6:8));
0394             priors = [outStruct.names priors];
0395             
0396             <span class="comment">% Group each row into one cell. Should be a way of doing this</span>
0397             <span class="comment">% without a loop but I can't quite see it right now...</span>
0398             pp = cell([1, size(priors, 1)]);
0399             <span class="keyword">for</span> i = 1:size(priors, 1)
0400                 thisPrior = priors(i,:);
0401                 val2 = char(thisPrior{2});
0402                 thisPrior{2} = val2;
0403                 pp(i) = {thisPrior};
0404             <span class="keyword">end</span>
0405             
0406             outStruct.priors = pp(:);
0407             
0408             
0409             <span class="comment">% Need to force some of the outputs</span>
0410             <span class="comment">% to be row vectors, so transpose them</span>
0411             outStruct.names = outStruct.names';
0412             outStruct.values = outStruct.values';
0413             outStruct.fit = outStruct.fit';
0414             
0415             <span class="comment">% Fields order needs to be...</span>
0416             
0417             <span class="comment">% names</span>
0418             <span class="comment">% limits</span>
0419             <span class="comment">% values</span>
0420             <span class="comment">% fit</span>
0421             <span class="comment">% priors</span>
0422         <span class="keyword">end</span>
0423         
0424     <span class="keyword">end</span>
0425     
0426     methods (Access = protected)
0427         
0428         <a name="_sub12" href="#_subfunctions" class="code">function index = getValidRow(obj, row)</a>
0429             <span class="comment">% Gets valid row with given name or index</span>
0430             <span class="comment">%</span>
0431             <span class="comment">% obj.getValidRow('param name')</span>
0432             <span class="keyword">if</span> isText(row)
0433                 index = obj.findRowIndex(row, obj.varTable{:,1}, <span class="string">'Unrecognised row name'</span>);
0434             <span class="keyword">else</span>
0435                 index = row;
0436                 <span class="keyword">if</span> (index &lt; 1) || (index &gt; obj.rowCount)
0437                     throw(exceptions.indexOutOfRange(sprintf(<span class="string">'Row index out out of range 1 - %d'</span>, obj.rowCount)));
0438                 <span class="keyword">end</span>     
0439             <span class="keyword">end</span>
0440         <span class="keyword">end</span>
0441 
0442         <a name="_sub13" href="#_subfunctions" class="code">function inputBlock = parseParameterInput(~, varargin)</a>
0443             <span class="comment">% Parses parameter keyword/value pairs into a structure.</span>
0444             <span class="comment">%</span>
0445             <span class="comment">% obj.parseParameterInput('name', 'param')</span>
0446             defaultName = <span class="string">''</span>;
0447             defaultMin = [];
0448             defaultMax = [];   
0449             defaultValue = [];
0450             defaultFit = [];
0451         
0452             p = inputParser;
0453             <a href="#_sub2" class="code" title="subfunction obj = addParameter(obj, varargin)">addParameter</a>(p,<span class="string">'name'</span>,  defaultName,   @isText);
0454             <a href="#_sub2" class="code" title="subfunction obj = addParameter(obj, varargin)">addParameter</a>(p,<span class="string">'min'</span>,   defaultMin,    @isnumeric);
0455             <a href="#_sub2" class="code" title="subfunction obj = addParameter(obj, varargin)">addParameter</a>(p,<span class="string">'value'</span>, defaultValue,  @isnumeric);
0456             <a href="#_sub2" class="code" title="subfunction obj = addParameter(obj, varargin)">addParameter</a>(p,<span class="string">'max'</span>,   defaultMax,    @isnumeric);
0457             <a href="#_sub2" class="code" title="subfunction obj = addParameter(obj, varargin)">addParameter</a>(p,<span class="string">'fit'</span>,   defaultFit,    @islogical);
0458                        
0459             parse(p, varargin{:});
0460             inputBlock = p.Results;
0461         <span class="keyword">end</span>
0462 
0463     <span class="keyword">end</span>
0464 
0465 <span class="keyword">end</span>
</pre></div>

<hr><address>Generated on Wed 05-Jun-2024 09:06:47 by <strong><a href="https://github.com/gllmflndn/m2html">m2html</a></strong> &copy; 2003-2022</address>
</body>
</html>

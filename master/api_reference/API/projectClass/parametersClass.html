<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of parametersClass</title>
  <meta name="keywords" content="parametersClass">
  <meta name="description" content="">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2003-2019 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- # API --><!-- # projectClass -->
<h1>parametersClass
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong></strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>This is a script file. </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment"></pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="parametersClass.html" class="code" title="">parametersClass</a>	</li></ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="backgroundsClass.html" class="code" title="">backgroundsClass</a>	</li><li><a href="parametersClass.html" class="code" title="">parametersClass</a>	</li><li><a href="projectClass.html" class="code" title="">projectClass</a>	</li><li><a href="resolutionsClass.html" class="code" title="">resolutionsClass</a>	</li></ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="#_sub1" class="code">function obj = parametersClass(startCell)</a></li><li><a href="#_sub2" class="code">function obj = setInitialValue(varargin)</a></li><li><a href="#_sub3" class="code">function names = getParamNames(obj)</a></li><li><a href="#_sub4" class="code">function obj = addParam(obj,varargin)</a></li><li><a href="#_sub5" class="code">function obj = removeParam(obj,varargin)</a></li><li><a href="#_sub6" class="code">function obj = setParameter(obj,varargin)</a></li><li><a href="#_sub7" class="code">function obj = setPrior(obj,varargin)</a></li><li><a href="#_sub8" class="code">function obj = setValue(obj,varargin)</a></li><li><a href="#_sub9" class="code">function obj = setName(obj,varargin)</a></li><li><a href="#_sub10" class="code">function obj = setConstr(obj, varargin)</a></li><li><a href="#_sub11" class="code">function obj = setFit(obj, varargin)</a></li><li><a href="#_sub12" class="code">function set.paramsTable(obj,table)</a></li><li><a href="#_sub13" class="code">function set.showPriors(obj,flag)</a></li><li><a href="#_sub14" class="code">function displayParametersTable(obj)</a></li><li><a href="#_sub15" class="code">function outStruct = toStruct(obj)</a></li><li><a href="#_sub16" class="code">function appendNewRow(obj,row)</a></li><li><a href="#_sub17" class="code">function removeRow(obj, row)</a></li><li><a href="#_sub18" class="code">function row = findRowIndex(name,tab)</a></li><li><a href="#_sub19" class="code">function inputBlock = parseParameterInput(varargin)</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 classdef <a href="parametersClass.html" class="code" title="">parametersClass</a> &lt; handle
0002     
0003     <span class="comment">% This is the class definition for</span>
0004     <span class="comment">% the parameters block.</span>
0005     
0006     properties
0007         paramsTable = table;
0008         showPriors = false;
0009     <span class="keyword">end</span>
0010     
0011     properties (Access = private)
0012         paramCount;
0013         paramAutoNameCounter
0014     <span class="keyword">end</span>
0015     
0016     methods
0017         <a name="_sub0" href="#_subfunctions" class="code">function obj = parametersClass(startCell)</a>
0018             
0019             <span class="comment">% Class constructor.</span>
0020             sz = [1 8];
0021             varTypes = {<span class="string">'string'</span>,<span class="string">'double'</span>,<span class="string">'double'</span>,<span class="string">'double'</span>,<span class="string">'logical'</span>,<span class="string">'string'</span>,<span class="string">'double'</span>,<span class="string">'double'</span>};
0022             varNames = {<span class="string">'Name'</span>,<span class="string">'Min'</span>,<span class="string">'Value'</span>,<span class="string">'Max'</span>,<span class="string">'Fit?'</span>,<span class="string">'Prior Type'</span>,<span class="string">'mu'</span>,<span class="string">'sigma'</span>};
0023             obj.paramsTable = table(<span class="string">'Size'</span>,sz,<span class="string">'VariableTypes'</span>,varTypes,<span class="string">'VariableNames'</span>,varNames);
0024             obj.paramsTable(1,:) = startCell;
0025             obj.paramCount = 1;
0026             obj.paramAutoNameCounter = 1;
0027         <span class="keyword">end</span>
0028         
0029         <a name="_sub1" href="#_subfunctions" class="code">function obj = setInitialValue(varargin)</a>
0030             initialValue = varargin{2};
0031             obj.paramsTable(1,:) = initialValue;
0032             obj.paramCount = 1;
0033             obj.paramAutoNameCounter = 1;
0034         <span class="keyword">end</span>
0035         
0036         <a name="_sub2" href="#_subfunctions" class="code">function names = getParamNames(obj)</a>
0037             
0038             names = obj.paramsTable{:,1}; 
0039             
0040         <span class="keyword">end</span>
0041         
0042         <a name="_sub3" href="#_subfunctions" class="code">function obj = addParam(obj,varargin)</a>
0043             
0044             <span class="keyword">if</span> isempty(varargin)
0045                 <span class="comment">% No input parameter</span>
0046                 <span class="comment">% Add an empty parameter row</span>
0047                 name = sprintf(<span class="string">'new parameter %d'</span>,obj.paramAutoNameCounter);
0048                 newRow = {name,0,0,0,false,<span class="string">'uniform'</span>,0,Inf};
0049                 <a href="#_sub16" class="code" title="subfunction appendNewRow(obj,row)">appendNewRow</a>(obj,newRow);
0050             <span class="keyword">end</span>
0051             
0052             <span class="keyword">if</span> iscell(varargin) &amp;&amp; ~isempty(varargin)
0053                 inputCell = varargin{:};
0054                 
0055                 <span class="comment">% First input must be a parameter name</span>
0056                 <span class="keyword">if</span> ~ischar(inputCell{1})
0057                     error(<span class="string">'First value must be param name'</span>);
0058                 <span class="keyword">end</span>
0059                 
0060                 inputLength = length(inputCell);
0061                 
0062                 <span class="keyword">switch</span> inputLength
0063                     
0064                     <span class="comment">% If length is 1, assume name only</span>
0065                     <span class="comment">% and fill in the rest with defaults</span>
0066                     <span class="keyword">case</span> 1
0067                         name = inputCell{1};
0068                         newRow = {name,1,2,3,false,<span class="string">'uniform'</span>,0,Inf};
0069                         <a href="#_sub16" class="code" title="subfunction appendNewRow(obj,row)">appendNewRow</a>(obj,newRow);
0070                         
0071                         <span class="comment">% If length is 2, assume name an value</span>
0072                         <span class="comment">% pair. Fill in the rest automatically</span>
0073                     <span class="keyword">case</span> 2
0074                         name = inputCell{1};
0075                         value = inputCell{2};
0076                         <span class="keyword">if</span> ~isnumeric(value)
0077                             error(<span class="string">'Expecting numberic value as param 2'</span>);
0078                         <span class="keyword">end</span>
0079                         newRow = {name,value,value,value,false,<span class="string">'uniform'</span>,0,Inf};
0080                         <a href="#_sub16" class="code" title="subfunction appendNewRow(obj,row)">appendNewRow</a>(obj,newRow);
0081                         
0082                         <span class="comment">% If length is 4, assume we are getting the</span>
0083                         <span class="comment">% limits as well as the values</span>
0084                     <span class="keyword">case</span> 4
0085                         name = inputCell{1};
0086                         values = [inputCell{2} inputCell{3} inputCell{4}];
0087                         <span class="keyword">if</span> ~isnumeric(values)
0088                             error(<span class="string">'Expecting numberic valus as params 2 - 4'</span>);
0089                         <span class="keyword">end</span>
0090                         newRow = {name,values(1),values(2),values(3),false,<span class="string">'uniform'</span>,0,Inf};
0091                         <a href="#_sub16" class="code" title="subfunction appendNewRow(obj,row)">appendNewRow</a>(obj,newRow);
0092                         
0093                         <span class="comment">% If length is 5, then assume we are setting</span>
0094                         <span class="comment">% everything except priors</span>
0095                     <span class="keyword">case</span> 5
0096                         name = inputCell{1};
0097                         values = [inputCell{2} inputCell{3} inputCell{4}];
0098                         fit = inputCell{5};
0099                         <span class="keyword">if</span> ~isnumeric(values)
0100                             error(<span class="string">'Expecting numberic valus as params 2 - 4'</span>);
0101                         <span class="keyword">end</span>
0102                         
0103                         <span class="keyword">if</span> ~islogical(fit)
0104                             error(<span class="string">'Expecting logical value for param 5'</span>)
0105                         <span class="keyword">end</span>
0106                         newRow = {name,values(1),values(2),values(3),fit,<span class="string">'uniform'</span>,0,Inf};
0107                         <a href="#_sub16" class="code" title="subfunction appendNewRow(obj,row)">appendNewRow</a>(obj,newRow);
0108                         
0109                         <span class="comment">% Case 8 must be everything including the prior</span>
0110                     <span class="keyword">case</span> 8
0111                         name = inputCell{1};
0112                         values = [inputCell{2} inputCell{3} inputCell{4}];
0113                         fit = inputCell{5};
0114                         priorType = inputCell{6};
0115                         priorValues = [inputCell{7} inputCell{8}];
0116                         
0117                         <span class="keyword">if</span> ~isnumeric(values)
0118                             error(<span class="string">'Expecting numberic valus as params 2 - 4'</span>);
0119                         <span class="keyword">end</span>
0120                         
0121                         <span class="keyword">if</span> ~islogical(fit)
0122                             error(<span class="string">'Expecting logical value for param 5'</span>)
0123                         <span class="keyword">end</span>
0124                         
0125                         <span class="keyword">if</span> ~strcmpi(priorType,{<span class="string">'uniform'</span>,<span class="string">'gaussian'</span>,<span class="string">'jeffreys'</span>})
0126                             error(<span class="string">'Prior type must be ''uniform'', ''gaussuan'' or ''jeffreys'''</span>);
0127                         <span class="keyword">end</span>
0128                         
0129                         <span class="keyword">if</span> ~isnumeric(priorValues)
0130                             error(<span class="string">'Prior values must be numeric'</span>);
0131                         <span class="keyword">end</span>
0132                         
0133                         newRow = {name,values(1),values(2),values(3),fit,priorType,priorValues(1),priorValues(2)};
0134                         <a href="#_sub16" class="code" title="subfunction appendNewRow(obj,row)">appendNewRow</a>(obj,newRow);
0135                        
0136                         
0137                         <span class="comment">% If not one of these options, throw an error</span>
0138                     <span class="keyword">otherwise</span>
0139                         error(<span class="string">'Unrecognised inputs to ''addrow'''</span>);
0140                 <span class="keyword">end</span>
0141             <span class="keyword">end</span>
0142         <span class="keyword">end</span>
0143         
0144         <a name="_sub4" href="#_subfunctions" class="code">function obj = removeParam(obj,varargin)</a>
0145             <span class="keyword">if</span> isempty(varargin)
0146                 error(<span class="string">'Need to specify a parameter'</span>);
0147             <span class="keyword">end</span>
0148             
0149             <span class="keyword">for</span> i = 1:length(varargin)
0150                 thisInput =  varargin{i};
0151                 <a href="#_sub17" class="code" title="subfunction removeRow(obj, row)">removeRow</a>(obj,thisInput);
0152             <span class="keyword">end</span>
0153         <span class="keyword">end</span>
0154         
0155         <a name="_sub5" href="#_subfunctions" class="code">function obj = setParameter(obj,varargin)</a>
0156             <span class="comment">% General purpose set method using name value pairs</span>
0157             
0158             inputValues = varargin{:};
0159             tab = obj.paramsTable;
0160             
0161             <span class="keyword">if</span> ischar(inputValues{1})
0162                 name = string(inputValues{1});
0163                 row = <a href="#_sub18" class="code" title="subfunction row = findRowIndex(name,tab)">findRowIndex</a>(name,tab);
0164             <span class="keyword">else</span>
0165                 row = inputValues{1};
0166             <span class="keyword">end</span>
0167            
0168             inputBlock = <a href="#_sub19" class="code" title="subfunction inputBlock = parseParameterInput(varargin)">parseParameterInput</a>(inputValues(2:end));
0169             
0170             <span class="keyword">if</span> ~isempty(inputBlock.name)
0171                 obj.setName({row,inputBlock.name});
0172             <span class="keyword">end</span>
0173             
0174             <span class="keyword">if</span> ~isempty(inputBlock.min)
0175                 max = obj.paramsTable{row,4};
0176                 obj.setConstr({row,inputBlock.min,max});
0177             <span class="keyword">end</span>
0178             
0179             <span class="keyword">if</span> ~isempty(inputBlock.max)
0180                 min = obj.paramsTable{row,2};
0181                 obj.setConstr({row,min,inputBlock.max});
0182             <span class="keyword">end</span>
0183             
0184             <span class="keyword">if</span> ~isempty(inputBlock.value)
0185                 obj.setValue({row,inputBlock.value});
0186             <span class="keyword">end</span>
0187             
0188             <span class="keyword">if</span> ~isempty(inputBlock.fit)
0189                 obj.setFit(row,inputBlock.fit);
0190             <span class="keyword">end</span>
0191 
0192         <span class="keyword">end</span>
0193         
0194         <a name="_sub6" href="#_subfunctions" class="code">function obj = setPrior(obj,varargin)</a>
0195 <span class="comment">%        If the input is a string, it looks for the row with that name in the table.</span>
0196 <span class="comment">%        2. If the input is a number, it looks for the row with that index in the table.</span>
0197 
0198             inputValues = varargin{:};
0199             tab = obj.paramsTable;
0200             
0201             <span class="keyword">if</span> ischar(inputValues{1})
0202                 name = string(inputValues{1});
0203                 row = <a href="#_sub18" class="code" title="subfunction row = findRowIndex(name,tab)">findRowIndex</a>(name,tab);
0204             <span class="keyword">else</span>
0205                 row = inputValues{1};
0206             <span class="keyword">end</span>
0207             
0208             priorType = inputValues{2};
0209             <span class="keyword">if</span> ~strcmpi(priorType,{<span class="string">'uniform'</span>,<span class="string">'gaussian'</span>,<span class="string">'jeffries'</span>})
0210                 error(<span class="string">'Prior needs to be ''unifom'',''gaussian'', or ''jeffreys'''</span>);
0211             <span class="keyword">end</span>
0212             
0213             priorType = lower(priorType);
0214             <span class="keyword">switch</span> priorType
0215                 <span class="keyword">case</span> <span class="string">'uniform'</span>
0216                     tab(row,6) = {<span class="string">'uniform'</span>};
0217                     tab(row,7) = {0};
0218                     tab(row,8) = {Inf};
0219                     
0220                 <span class="keyword">case</span> <span class="string">'gaussian'</span>
0221                     tab(row,6) = {<span class="string">'gaussian'</span>};             
0222                     tab(row,7) = inputValues(3);
0223                     tab(row,8) = inputValues(4);
0224             <span class="keyword">end</span>
0225     
0226             obj.paramsTable = tab;
0227             
0228         <span class="keyword">end</span>
0229         
0230         <a name="_sub7" href="#_subfunctions" class="code">function obj = setValue(obj,varargin)</a>
0231             inputValues = varargin{:};
0232             tab = obj.paramsTable;
0233             <span class="keyword">if</span> length(inputValues) ~= 2
0234                 error(<span class="string">'Need p (or name) / value pair to set'</span>);
0235             <span class="keyword">end</span>
0236             
0237             <span class="keyword">if</span> ischar(inputValues{1})
0238                 name = string(inputValues{1});
0239                 row = <a href="#_sub18" class="code" title="subfunction row = findRowIndex(name,tab)">findRowIndex</a>(name,tab);
0240             <span class="keyword">else</span>
0241                 row = inputValues{1};
0242             <span class="keyword">end</span>
0243             
0244             <span class="keyword">if</span> ~isnumeric(inputValues{2})
0245                 error(<span class="string">'Value must be numeric'</span>);
0246             <span class="keyword">end</span>
0247             value = inputValues{2};
0248             tab(row,3) = {value};
0249             obj.paramsTable = tab;
0250         <span class="keyword">end</span>
0251         
0252         <a name="_sub8" href="#_subfunctions" class="code">function obj = setName(obj,varargin)</a>
0253             tab = obj.paramsTable;
0254             inputValues = varargin{:};
0255             <span class="keyword">if</span> length(inputValues) ~= 2
0256                 error(<span class="string">'Wrong number of values for setName'</span>);
0257             <span class="keyword">end</span>
0258             
0259             <span class="keyword">if</span> ischar(inputValues{1})
0260                 name = string(inputValues{1});
0261                 row = <a href="#_sub18" class="code" title="subfunction row = findRowIndex(name,tab)">findRowIndex</a>(name,tab);
0262             <span class="keyword">else</span>
0263                 row = inputValues{1};
0264             <span class="keyword">end</span>
0265             
0266             <span class="keyword">if</span> ~ischar(inputValues{2})
0267                 error(<span class="string">'New name must be char'</span>);
0268             <span class="keyword">end</span>
0269             name = inputValues{2};
0270             tab(row,1) = {name};
0271             obj.paramsTable = tab;
0272         <span class="keyword">end</span>
0273         
0274         <a name="_sub9" href="#_subfunctions" class="code">function obj = setConstr(obj, varargin)</a>
0275             tab = obj.paramsTable;
0276             inputValues = varargin{:};
0277             <span class="keyword">if</span> length(inputValues) ~= 3
0278                 error(<span class="string">'Need p (or name) / min / max set'</span>);
0279             <span class="keyword">end</span>
0280             
0281             min = inputValues{2};
0282             max = inputValues{3};
0283             <span class="keyword">if</span> ~(isnumeric(min) &amp;&amp; isnumeric(max))
0284                 error(<span class="string">'min and max need to be numeric'</span>);
0285             <span class="keyword">end</span>
0286             
0287             <span class="keyword">if</span> ischar(inputValues{1})
0288                 name = string(inputValues{1});
0289                 row = <a href="#_sub18" class="code" title="subfunction row = findRowIndex(name,tab)">findRowIndex</a>(name,tab);
0290             <span class="keyword">else</span>
0291                 row = inputValues{1};
0292             <span class="keyword">end</span>
0293             
0294             tab(row,2) = {min};
0295             tab(row,4) = {max};
0296             obj.paramsTable = tab;
0297         <span class="keyword">end</span>
0298         
0299         
0300         <a name="_sub10" href="#_subfunctions" class="code">function obj = setFit(obj, varargin)</a>
0301             
0302             <span class="keyword">if</span> iscell(varargin) &amp;&amp; length(varargin) == 1
0303                 varargin = varargin{:};
0304             <span class="keyword">end</span>
0305             
0306             tab = obj.paramsTable;
0307             <span class="keyword">if</span> length(varargin) ~= 2
0308                 error(<span class="string">'Need p (or name) / val pair set'</span>);
0309             <span class="keyword">end</span>
0310             
0311             <span class="keyword">if</span> ~islogical(varargin{2})
0312                 error(<span class="string">'Need true or false for Fit? value'</span>);
0313             <span class="keyword">end</span>
0314             
0315             <span class="keyword">if</span> ischar(varargin{1})
0316                 name = string(varargin{1});
0317                 row = <a href="#_sub18" class="code" title="subfunction row = findRowIndex(name,tab)">findRowIndex</a>(name,tab);
0318             <span class="keyword">else</span>
0319                 row = varargin{1};
0320             <span class="keyword">end</span>
0321             
0322             tab(row,5) = varargin(2);
0323             obj.paramsTable = tab;
0324         <span class="keyword">end</span>
0325         
0326         <a name="_sub11" href="#_subfunctions" class="code">function set.paramsTable(obj,table)</a>
0327             obj.paramsTable = table;
0328         <span class="keyword">end</span>
0329         
0330         <a name="_sub12" href="#_subfunctions" class="code">function set.showPriors(obj,flag)</a>
0331             <span class="keyword">if</span> ~islogical(flag)
0332                 error(<span class="string">'Show priors must be true or false'</span>);
0333             <span class="keyword">end</span>
0334             obj.showPriors = flag;
0335         <span class="keyword">end</span>
0336         
0337         <a name="_sub13" href="#_subfunctions" class="code">function displayParametersTable(obj)</a>
0338             array = obj.paramsTable;
0339             p = [1:size(array,1)];
0340             p = p(:);
0341             p = table(p);
0342             <span class="keyword">if</span> ~obj.showPriors
0343                 array = array(:,1:5);
0344             <span class="keyword">end</span>
0345             all = [p array];
0346             disp(all);
0347         <span class="keyword">end</span>
0348         
0349         
0350         <a name="_sub14" href="#_subfunctions" class="code">function outStruct = toStruct(obj)</a>
0351             
0352             <span class="comment">% Convert the class parameters into</span>
0353             <span class="comment">% a structure array.</span>
0354             
0355             paramNames = table2cell(obj.paramsTable(:,1));
0356             
0357             <span class="comment">% Want these to be class 'char' rather than 'string'</span>
0358             <span class="keyword">for</span> n = 1:length(paramNames)
0359                 paramNames{n} = char(paramNames{n});
0360             <span class="keyword">end</span>
0361             outStruct.paramNames = paramNames;
0362             
0363             outStruct.nParams = size(obj.paramsTable,1);
0364             
0365             mins = obj.paramsTable{:,2};
0366             maxs = obj.paramsTable{:,4};
0367             <span class="keyword">for</span> i = 1:length(mins)
0368                 constr{i} = [mins(i) maxs(i)];
0369             <span class="keyword">end</span>
0370             
0371             <span class="comment">%constr = [mins maxs];</span>
0372             outStruct.paramConstr = constr;
0373             
0374             outStruct.params = obj.paramsTable{:,3};
0375             
0376             outStruct.fitYesNo = double(obj.paramsTable{:,5});
0377             
0378             priors = table2cell(obj.paramsTable(:,6:8));
0379             outStruct.priors = [outStruct.paramNames priors];
0380             
0381             <span class="comment">% Need to force some of the outputs</span>
0382             <span class="comment">% to be row vectors, so transpose them</span>
0383             outStruct.paramNames = outStruct.paramNames';
0384             <span class="comment">%outStruct.paramConstr = outStruct.paramConstr;</span>
0385             outStruct.params = outStruct.params';
0386             outStruct.fitYesNo = outStruct.fitYesNo';
0387             
0388             <span class="comment">% Fields order needs to be...</span>
0389             
0390             <span class="comment">% paramNames</span>
0391             <span class="comment">% nParams</span>
0392             <span class="comment">% paramConstr</span>
0393             <span class="comment">% params</span>
0394             <span class="comment">% fitYesNo</span>
0395             <span class="comment">% priors</span>
0396             
0397         <span class="keyword">end</span>
0398         
0399     <span class="keyword">end</span>
0400     
0401     
0402     methods (Access = protected)
0403         
0404         <a name="_sub15" href="#_subfunctions" class="code">function appendNewRow(obj,row)</a>
0405             tab = obj.paramsTable;
0406             newName = row{1};
0407             <span class="keyword">if</span> any(strcmp(newName,tab{:,1}))
0408                 error(<span class="string">'Duplicate parameter names not allowed'</span>);
0409             <span class="keyword">end</span>
0410             tab = [tab ; row];
0411             obj.paramsTable = tab;
0412             obj.paramCount = obj.paramCount + 1;
0413             obj.paramAutoNameCounter = obj.paramAutoNameCounter + 1;
0414         <span class="keyword">end</span>
0415         
0416         <a name="_sub16" href="#_subfunctions" class="code">function removeRow(obj, row)</a>
0417             tab = obj.paramsTable;
0418             
0419             <span class="keyword">if</span> ischar(row)
0420                 <span class="comment">% Assume a row name</span>
0421                 index = strcmp(row, tab{:,1});
0422                 <span class="keyword">if</span> isempty(index)
0423                     error(<span class="string">'Unrecognised parameter name'</span>);
0424                 <span class="keyword">end</span>
0425                 row = find(index);
0426             <span class="keyword">end</span>
0427             
0428             numRows = size(tab,1);
0429             <span class="keyword">if</span> row == numRows
0430                 <span class="comment">% Removing the last row</span>
0431                 newTab = tab(1:end-1,:);
0432                 
0433             <span class="keyword">elseif</span> row == 1
0434                 newTab = tab(2:<span class="keyword">end</span>,:);
0435                 
0436             <span class="keyword">else</span>
0437                 <span class="comment">% Removing a row somewhere in the centre</span>
0438                 tab1 = tab(1:row-1,:);
0439                 tab2 = tab(row+1:<span class="keyword">end</span>,:);
0440                 newTab = [tab1 ; tab2];
0441             <span class="keyword">end</span>
0442             
0443             obj.paramsTable = newTab;
0444             obj.paramCount = obj.paramCount - 1;
0445             
0446         <span class="keyword">end</span>
0447         
0448 
0449     <span class="keyword">end</span>
0450 
0451 <span class="keyword">end</span>
0452 
0453 
0454 <a name="_sub17" href="#_subfunctions" class="code">function row = findRowIndex(name,tab)</a>
0455     <span class="comment">% Get loist of rownames from table..</span>
0456     namesList = tab{:,1};
0457     
0458     <span class="comment">% Strip leading or trailing whitaspaces from names and name</span>
0459     namesList = strip(namesList);
0460     name = strip(name);
0461     
0462     <span class="comment">% Compare 'name' to list ignoring case</span>
0463     index = strcmpi(name, namesList);
0464     <span class="keyword">if</span> isempty(index)
0465         error(<span class="string">'Unrecognised parameter name'</span>);
0466     <span class="keyword">end</span>
0467     
0468     <span class="comment">% Non-zero value in array is the row index</span>
0469     row = find(index);
0470 <span class="keyword">end</span>
0471 
0472 
0473 <a name="_sub18" href="#_subfunctions" class="code">function inputBlock = parseParameterInput(varargin)</a>
0474 
0475     defaultName = <span class="string">''</span>;
0476     defaultMin = [];
0477     defaultMax = [];   
0478     defaultValue = [];
0479     defaultFit = [];
0480 
0481     p = inputParser;
0482     addParameter(p,<span class="string">'name'</span>,  defaultName,   @ischar);
0483     addParameter(p,<span class="string">'min'</span>,   defaultMin,    @isnumeric);
0484     addParameter(p,<span class="string">'value'</span>, defaultValue,  @isnumeric);
0485     addParameter(p,<span class="string">'max'</span>,   defaultMax,    @isnumeric);
0486     addParameter(p,<span class="string">'fit'</span>,   defaultFit,    @islogical);
0487     
0488     inputVals = varargin{:};
0489     
0490     parse(p,inputVals{:});
0491     inputBlock = p.Results;
0492 
0493 <span class="keyword">end</span>
0494 
0495</pre></div>
<hr><address>Generated on Thu 28-Jul-2022 16:33:05 by <strong><a href="https://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2003-2019</address>
</body>
</html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of shiftData</title>
  <meta name="keywords" content="shiftData">
  <meta name="description" content="Shifts the data according to scale factor. If there is no data, makes">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2003-2019 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- ../menu.html targetFunctions -->
<!-- menu.html common -->

<h1>shiftData
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>Shifts the data according to scale factor. If there is no data, makes</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function shiftedData = shiftData(scalefactor,qzshift,dataPresent,data,dataLimits,simLimits) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> Shifts the data according to scale factor. If there is no data, makes 
 x-data over the simulation range.

 INPUTS:
     * scalefactor: problemStruct.scalefactors
     * qzshift: problemStruct.qzhifts
     * dataPresent: problemStruct.dataPresent
     * data: problemStruct.data
     * dataLimits: problemStruct.dataLimits
     * simLimits: problemStruct.simLimits

 OUTPUTS:
     * shiftedData: Data shifted using given scale factor
</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="../../targetFunctions/+domainsTF/customXY.html" class="code" title="function [backgroundParams,qzshifts,scalefactors,bulkIns,bulkOuts,resolutionParams,chis,reflectivity,simulation,shiftedData,domainLayerSlds,domainSldProfiles,domainResampledLayers,subRoughs] = customXY(problemStruct,problemCells,controls)">customXY</a>	Extract individual cell arrays</li>
<li><a href="../../targetFunctions/+nonPolarisedTF/coreLayersCalculation.html" class="code" title="function [sldProfile,reflect,simulation,shiftedData,theseLayers,resamLayers,chiSq] =coreLayersCalculation(contrastLayers, rough,geometry, bulkIn, bulkOut, resample, calcSld, scalefactor, qzshift,dataPresent, data, dataLimits, simLimits, repeatLayers,background,resolution,contrastBackgroundsType,params,parallelPoints,resampleParams,useImaginary)">coreLayersCalculation</a>	This is the main reflectivity calculation for all Layers models in the</li>
<li><a href="../../targetFunctions/+nonPolarisedTF/customXY.html" class="code" title="function [backgroundParams,qzshifts,scalefactors,bulkIns,bulkOuts,resolutionParams,chis,reflectivity,simulation,shiftedData,layerSlds,sldProfiles,resampledLayers,subRoughs] = customXY(problemStruct,problemCells,controls)">customXY</a>	Extract individual cell arrays</li>
</ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function shiftedData = shiftData(scalefactor,qzshift,dataPresent,data,dataLimits,simLimits)</a>
0002 <span class="comment">% Shifts the data according to scale factor. If there is no data, makes</span>
0003 <span class="comment">% x-data over the simulation range.</span>
0004 <span class="comment">%</span>
0005 <span class="comment">% INPUTS:</span>
0006 <span class="comment">%     * scalefactor: problemStruct.scalefactors</span>
0007 <span class="comment">%     * qzshift: problemStruct.qzhifts</span>
0008 <span class="comment">%     * dataPresent: problemStruct.dataPresent</span>
0009 <span class="comment">%     * data: problemStruct.data</span>
0010 <span class="comment">%     * dataLimits: problemStruct.dataLimits</span>
0011 <span class="comment">%     * simLimits: problemStruct.simLimits</span>
0012 <span class="comment">%</span>
0013 <span class="comment">% OUTPUTS:</span>
0014 <span class="comment">%     * shiftedData: Data shifted using given scale factor</span>
0015 
0016 <span class="keyword">switch</span> dataPresent
0017 
0018     <span class="keyword">case</span> 1
0019         
0020         <span class="keyword">if</span> scalefactor == 0
0021             scalefactor = 1e-30;
0022         <span class="keyword">end</span>
0023         data(:,1) = data(:,1) + qzshift;
0024         data(:,2) = data(:,2) ./ scalefactor;
0025         data(:,3) = data(:,3) ./ scalefactor;
0026         
0027         lowLimit = dataLimits(1);
0028         hiLimit = dataLimits(2);
0029         
0030         lowIndex = find(data(:,1) &lt; lowLimit);
0031         <span class="keyword">if</span> ~isempty(lowIndex)
0032             lowIndex = lowIndex(end);
0033         <span class="keyword">else</span>
0034             lowIndex = 1;
0035         <span class="keyword">end</span>
0036         
0037         hiIndex = find(data(:,1) &gt; hiLimit);
0038         <span class="keyword">if</span>  ~isempty(hiIndex)
0039             hiIndex = hiIndex(1);
0040         <span class="keyword">else</span>
0041             hiIndex = length(data(:,1));
0042         <span class="keyword">end</span>
0043         
0044         shiftedData = data(lowIndex:hiIndex,:);
0045 
0046     <span class="keyword">otherwise</span>
0047 
0048         simPoints = 500;
0049         simLo = simLimits(1);
0050         simHi = simLimits(2);
0051         simXData = linspace(simLo,simHi,simPoints);
0052         simYData = zeros(length(simXData),1);
0053         shiftedData = [simXData(:) simYData(:) simYData(:)];
0054 
0055 <span class="keyword">end</span>
0056  
</pre></div>

<hr><address>Generated on Fri 22-Mar-2024 15:09:58 by <strong><a href="https://github.com/gllmflndn/m2html">m2html</a></strong> &copy; 2003-2022</address>
</body>
</html>

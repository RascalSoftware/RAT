<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Adding the Imaginary Refractive Index &mdash; RAT 1.0.0-beta documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
        <script src="_static/design-tabs.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Incoherent Summing (Domains)" href="incoherent.html" />
    <link rel="prev" title="Different Calculation Types" href="calcTypes.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html">
            
              <img src="_static/ratLogo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="algorithms.html">Algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced.html">Advanced Topics</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="calcTypes.html">Different Calculation Types</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Adding the Imaginary Refractive Index</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#standard-layers-models"><strong>Standard Layers Models</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="#custom-models"><strong>Custom Models</strong></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="incoherent.html">Incoherent Summing (Domains)</a></li>
<li class="toctree-l2"><a class="reference internal" href="oilWater.html">Reflectivity from Oil/Water Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="magnetic.html">Reflectivity from Magnetic Samples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="utilities.html">Utility Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="support.html">Support</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">RAT</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="calcTypes.html">Different Calculation Types</a></li>
      <li class="breadcrumb-item active">Adding the Imaginary Refractive Index</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/imaginary.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="adding-the-imaginary-refractive-index">
<span id="imaginary"></span><h1>Adding the Imaginary Refractive Index<a class="headerlink" href="#adding-the-imaginary-refractive-index" title="Permalink to this heading"></a></h1>
<p>In contrast to RasCAL1, RAT allows the inclusion of the imaginary part of the refractive index to the project. The exact method of doing this varies according to the calculation type,
but at the project top-level, the method of enabling it is always the same. If the project is called ‘problem’, then:</p>
<div class="highlight-MATLAB notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="p">.</span><span class="n">absorption</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
</pre></div>
</div>
<p>How this is then handled depends on the calculation type.</p>
<section id="standard-layers-models">
<h2><strong>Standard Layers Models</strong><a class="headerlink" href="#standard-layers-models" title="Permalink to this heading"></a></h2>
<p>The imaginary refractive index appears as a new column in the ‘Layers’ block..</p>
<a class="reference internal image-reference" href="_images/imaginarySL.png"><img alt="imaginary layers" src="_images/imaginarySL.png" style="width: 600px;" /></a>
<p>Then, the value of this column are set (from the Parameters block) in the same way as all the other cells in the table.</p>
</section>
<section id="custom-models">
<h2><strong>Custom Models</strong><a class="headerlink" href="#custom-models" title="Permalink to this heading"></a></h2>
<p>For custom models, an extra column is also required in the output from the custom function.</p>
<p>So, for example, in the <em>/examples/miscellaneous/absorption</em> folder, there is a Custom Layers example including absorption. In this example (a bilayer on a gold surface)
an imaginary SLD is required for the metal layers:</p>
<div class="highlight-MATLAB notranslate"><div class="highlight"><pre><span></span><span class="n">GOLD</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="n">goldThick</span><span class="w"> </span><span class="n">goldSLD</span><span class="w"> </span><span class="n">goldISLD</span><span class="w"> </span><span class="n">goldRough</span><span class="p">];</span>
<span class="n">alloyUp</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="n">alloyThick</span><span class="w"> </span><span class="n">alloySLDUp</span><span class="w"> </span><span class="n">alloyISLDUp</span><span class="w"> </span><span class="n">alloyRough</span><span class="p">];</span>
<span class="n">alloyDown</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="n">alloyThick</span><span class="w"> </span><span class="n">alloySLDDown</span><span class="w"> </span><span class="n">alloyISLDDown</span><span class="w"> </span><span class="n">alloyRough</span><span class="p">];</span>
</pre></div>
</div>
<p>but there is no imaginary component expected for the organic layers (but the extra column is still necessary).</p>
<div class="highlight-MATLAB notranslate"><div class="highlight"><pre><span></span><span class="n">BILTAILS</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="n">thickTail</span><span class="w"> </span><span class="n">sldTail</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">bilayerRough</span><span class="p">];</span>
<span class="n">BILHEAD</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="n">thickHead</span><span class="w"> </span><span class="n">sldHead</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">bilayerRough</span><span class="p">];</span>
<span class="n">BILME</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="n">thickMe</span><span class="w"> </span><span class="n">sldMe</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">bilayerRough</span><span class="p">];</span>
</pre></div>
</div>
<p>For custom XY models, it is necessary to construct a profile which represents the imaginary SLD across the sample, and this then appears as am extra column in the output:</p>
<div class="highlight-MATLAB notranslate"><div class="highlight"><pre><span></span><span class="n">output</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="n">X1</span><span class="w">    </span><span class="n">SLD1</span><span class="w">    </span><span class="n">SLD_im_1</span>
<span class="w">          </span><span class="n">X2</span><span class="w">    </span><span class="n">SLD2</span><span class="w">    </span><span class="n">SLD_im_2</span>
<span class="w">                </span><span class="k">...</span>
<span class="w">          </span><span class="n">Xn</span><span class="w">    </span><span class="n">SLDn</span><span class="w">    </span><span class="n">SLD_im_n</span><span class="p">]</span><span class="w"> </span><span class="p">;</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="calcTypes.html" class="btn btn-neutral float-left" title="Different Calculation Types" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="incoherent.html" class="btn btn-neutral float-right" title="Incoherent Summing (Domains)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022-2024, ISIS Neutron and Muon Source.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>